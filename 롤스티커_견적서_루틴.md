# 롤스티커 견적서 시스템 - 완전 가이드

## 📋 시스템 개요

두손기획인쇄 롤스티커 견적 자동 계산 및 견적서 출력 시스템

**파일 위치:** `/shop/roll_sticker_calculator.php`

---

## 🎯 입력 항목

### 1. 기본 정보
- **받을 회사**: 견적서 수신 회사명
- **재질 선택**: 8종 (아트지, 유포지, 은데드롱, 투명데드롱, 금지, 은지, 크라프트, 홀로그램)
- **가로 (mm)**: 스티커 가로 크기
- **세로 (mm)**: 스티커 세로 크기
- **매수**: 제작 수량
- **도무송(톰슨)**: 칼 개수 (1~20개)
- **도수**: 인쇄 색상 수 (1~5도)

### 2. 선택 옵션
- **편집비**: 체크박스 (도당 5,000원, 최소 10,000원)
- **백색인쇄**: 체크박스 (매수×20원, 최소 20,000원)
  - 선택시 백색인쇄 필름비, 수지판비 자동 추가
- **택배선불**: 숫자 입력 (택배비)
- **코팅**: 없음 / 유광 / 무광 / UV
- **박**: 없음 / 유광금박 / 무광금박 / 유광은박 / 무광은박
  - 선택시 동판비 자동 추가
- **형압**: 없음 / 양각 / 음각
  - 선택시 형압용수지판비(암수 2개) 자동 추가
- **부분코팅**: 체크박스 (30,000원/1000매)

---

## 💰 계산 로직 (15개 항목)

### 1. 재질비
```
재질비 = MAX(재질단가 × 10,000원, (재질단가 × 가로 × 세로 × 매수) ÷ 1000)
```
**재질별 단가 및 최소비용:**
| 재질 | 단가(원/㎟) | 최소비용 |
|------|------------|---------|
| 아트지 | 1.5 | 15,000원 |
| 유포지 | 2.5 | 25,000원 |
| 은데드롱 | 2.5 | 25,000원 |
| 투명데드롱 | 2.5 | 25,000원 |
| 금지 | 3.5 | 35,000원 |
| 은지 | 3.5 | 35,000원 |
| 크라프트 | 2.3 | 23,000원 |
| 홀로그램 | 5.0 | 50,000원 |

### 2. 도안비 (편집비)
```
도안비 = MAX(10,000원, 도수 × 5,000원)
```
- 조건: 편집비 체크시만 적용

### 3. 필름비
```
필름비 = MAX(4,000원, 가로 × 세로 × 1원) × 도수
```

### 4. 수지판비
```
수지판비 = MAX(5,000원, 가로 × 세로 × 3원) × 도수
```

### 5. 도무송비
```
도무송비 = MAX(10,000원, 가로 × 세로 × 2원) × 칼개수
```

### 6. 인쇄비
```
인쇄비 = MAX(10,000원, 매수 × 도수 × 10원)
```

### 7. 백색인쇄비
```
백색인쇄비 = MAX(20,000원, 매수 × 20원)
```
- 조건: 백색인쇄 체크시만 적용

### 7-1. 백색인쇄 필름비
```
백색인쇄 필름비 = MAX(4,000원, 가로 × 세로 × 1원)
```
- 조건: 백색인쇄 선택시 자동 적용

### 7-2. 백색인쇄 수지판비
```
백색인쇄 수지판비 = MAX(5,000원, 가로 × 세로 × 3원)
```
- 조건: 백색인쇄 선택시 자동 적용

### 8. 코팅비
```
코팅비 = (매수 ÷ 1000) × 코팅단가
```
**코팅 단가 (1000매당):**
- 유광: 50,000원
- 무광: 40,000원
- UV: 10,000원

### 9. 박 비용
```
박비용 = MAX(35,000원, 가로 × 세로 × 매수 × 0.016원)
```

### 10. 동판비
```
동판비 = MAX(5,000원, 가로 × 세로 × 5원)
```
- 조건: 박 선택시 자동 적용

### 11. 형압비
```
형압비 = (매수 ÷ 1000) × 30,000원
```

### 12. 형압용수지판비
```
형압용수지판비 = MAX(5,000원, 가로 × 세로 × 3원) × 2개
```
- 조건: 형압 선택시 자동 적용 (암수 2개)

### 13. 부분코팅비
```
부분코팅비 = (매수 ÷ 1000) × 30,000원
```

### 14. 택배선불
```
택배선불 = 입력값
```

### 최종 금액 계산
```
공급가 = 재질비 + 도안비 + 필름비 + 수지판비 + 도무송비 + 인쇄비 
       + 백색인쇄비 + 백색인쇄필름비 + 백색인쇄수지판비
       + 코팅비 + 박비용 + 동판비 + 형압비 + 형압용수지판비 
       + 부분코팅비 + 택배선불

부가세 = 공급가 × 0.1
총 금액 = 공급가 × 1.1
```

---

## 📄 견적서 양식 (표준 견적서 형식)

### 레이아웃 구조

```
┌─────────────────────────────────────────────────┐
│ No.                    견 적 서                  │
├──────────────┬──────────────┬───────────────────┤
│ 견적일       │ 2024년 11월  │                   │
├──────────────┼──────────────┤   공 급 자        │
│ 담당자       │ ○○○ 귀하    │  (등록번호, 대표자,│
├──────────────┼──────────────┤   상호, 주소,     │
│ 유효기간     │ 7일          │   연락처, 업태)   │
├──────────────┴──────────────┤                   │
│      합계금액 (부가세포함)    │                   │
├──────────────────────────────┼───────────────────┤
│ 일금 육십만원정              │                   │
│ ( ₩600,000 )                │   600,000 원      │
└──────────────────────────────┴───────────────────┘

┌───┬────────┬──────────┬────┬────┬──────┬────────┬────┐
│NO │ 품 목  │규격 및 사양│수량│단위│ 단가 │공급가액│비고│
├───┼────────┼──────────┼────┼────┼──────┼────────┼────┤
│ 1 │롤스티커│아트지     │1000│ 매 │50,000│250,000원│    │
│   │        │100×100mm │    │    │      │        │    │
│   │        │4도        │    │    │      │        │    │
├───┼────────┼──────────┼────┼────┼──────┼────────┼────┤
│ 2 │택배선불│          │  1 │ 식 │      │        │    │
├───┼────────┼──────────┼────┼────┼──────┼────────┼────┤
│3~16│ (빈 행)                                          │
├───┴────────┴──────────┴────┴────┴──────┴────────┴────┤
│ 공급가액 합계                              250,000 원 │
├──────────────────────────────────────────────────────┤
│ 세 액 (VAT)                                25,000 원 │
├──────────────────────────────────────────────────────┤
│ 합 계(부가세 포함)                         275,000 원 │
└──────────────────────────────────────────────────────┘

▶ 입금 계좌번호 : 국민 999-1688-2384 / 신한 110-342-543507 / 농협 301-2632-1829
                  예금주: 두손기획인쇄 차경선
▶ 담당자 :
▶ 비 고 : 택배는 착불기준입니다
```

### 견적서 세부 사양

**페이지 크기:** A4 (210mm × 297mm)
**여백:** 10mm
**테두리:** 2px solid black

**폰트 크기:**
- 제목 "견 적 서": 28px
- 상단 테이블: 13px
- 공급자 칸: 14px
- 합계금액 제목: 24px / (부가세포함): 20px
- 일금 한글: 36px
- 일금 괄호: 24px
- 합계금액 숫자: 44px
- 품목 테이블: 12px
- 규격 및 사양: 11px
- 하단 정보: 14px

**회사 정보:**
- 등록번호: 107-06-45106
- 대표자: 차경선(직인생략)
- 상호: 두손기획인쇄
- 주소: 서울 영등포구 영등포로36길9 송호빌딩 1층
- 연락처: 02-2632-1830
- 업태: 제조
- 종목: 인쇄업외

**계좌 정보:**
- 국민: 999-1688-2384
- 신한: 110-342-543507
- 농협: 301-2632-1829
- 예금주: 두손기획인쇄 차경선

---

## 🔄 자동 적용 규칙

### 1. 박 선택 → 동판비 자동 적용
- 박(금박/은박) 선택시 동판비가 자동으로 계산됨

### 2. 형압 선택 → 형압용수지판비 자동 적용
- 형압(양각/음각) 선택시 형압용수지판비(암수 2개)가 자동으로 계산됨

### 3. 백색인쇄 선택 → 백색인쇄 필름비 + 수지판비 자동 적용
- 백색인쇄 선택시 백색인쇄용 필름비와 수지판비가 자동으로 계산됨

---

## 🖨️ 인쇄 설정

### CSS @media print
```css
@media print {
    body {
        margin: 0;
        padding: 0;
    }
    .container, .header, .content, .form-section, .result-section {
        display: none !important;
    }
    .quote-print {
        display: block !important;
        position: relative;
        width: 210mm;
        height: 297mm;
        margin: 0;
        padding: 10mm;
        box-sizing: border-box;
        page-break-after: always;
        border: 2px solid #000;
    }
    @page {
        size: A4;
        margin: 0;
    }
}
```

---

## 📝 한글 금액 변환 로직

```php
function numberToKorean($num) {
    global $korean_num, $korean_unit;
    if ($num == 0) return '영';
    
    $result = '';
    $unit_idx = 0;
    
    while ($num > 0) {
        $digit = $num % 10;
        if ($digit > 0) {
            if ($digit == 1 && ($unit_idx == 1 || $unit_idx == 2 || $unit_idx == 3 || $unit_idx == 5 || $unit_idx == 6 || $unit_idx == 7)) {
                $result = $korean_unit[$unit_idx] . $result;
            } else {
                $result = $korean_num[$digit] . $korean_unit[$unit_idx] . $result;
            }
        }
        if ($unit_idx == 4 && $digit > 0) $result = '만' . $result;
        if ($unit_idx == 8 && $digit > 0) $result = '억' . $result;
        $num = floor($num / 10);
        $unit_idx++;
    }
    
    // 맨 앞의 "만" 제거
    if (mb_substr($result, 0, 1) == '만') {
        $result = mb_substr($result, 1);
    }
    
    return $result;
}
```

**예시:**
- 69,300원 → "육만구천삼백원정"
- 275,000원 → "이십칠만오천원정"
- 1,034,000원 → "백삼만사천원정"

---

## 🎨 UI/UX 특징

### 입력 폼
- 한 줄 레이아웃 (제목 + 입력필드)
- 재질 선택이 맨 위
- 가로/세로, 매수/도무송 2열 배치
- 체크박스 옵션 (편집비, 백색인쇄, 부분코팅)
- 자동 적용 안내 메시지

### 결과 표시
- 받을 회사명 강조 (파란색 굵은 글씨)
- 각 항목별 상세 계산 내역
- 선택한 옵션만 표시 (조건부 렌더링)
- 자동 적용 항목 표시
- 최종 금액 강조 (공급가, 부가세, 총 금액)

### 반응형 디자인
- 데스크톱: 2열 레이아웃 (입력폼 | 결과)
- 모바일: 1열 레이아웃 (세로 스택)

---

## 🔧 기술 스택

- **언어**: PHP 7.4+
- **프론트엔드**: HTML5, CSS3 (Grid Layout)
- **데이터 처리**: POST 방식
- **세션 관리**: PHP Session
- **데이터베이스**: MySQL (db.php 연동)
- **인쇄**: CSS @media print

---

## 📌 주요 특징

1. **정확한 계산**: 업계 표준 단가 적용
2. **최소값 보장**: 각 항목별 최소 금액 설정
3. **자동 연동**: 
   - 박 선택 → 동판비 자동
   - 형압 선택 → 형압용수지판비 자동
   - 백색인쇄 선택 → 백색인쇄 필름비/수지판비 자동
4. **투명한 견적**: 모든 계산 과정 상세 표시
5. **표준 견적서**: 업계 표준 양식 적용
6. **A4 최적화**: 한 페이지에 완벽하게 출력
7. **한글 금액**: 자동 변환 및 표시
8. **사용자 친화적**: 직관적인 UI/UX
9. **실시간 계산**: 즉시 견적 확인 가능

---

## 🔄 업데이트 이력

- **2024-11**: 초기 버전 개발
  - 기본 계산 로직 구현 (15개 항목)
  - 표준 견적서 양식 구현
  - 반응형 UI 구현
  - 자동 적용 규칙 구현
  - 재질비 최소값 적용
  - 인쇄비 최소값 적용
  - 백색인쇄 기능 추가
  - 택배선불 기능 추가
  - 한글 금액 변환 기능
  - A4 페이지 최적화
  - 인쇄 CSS 최적화

---

## 📞 문의 정보

- **전화**: 02-2632-1830 / 1688-2384
- **이메일**: dsp1830@naver.com
- **회사**: 두손기획인쇄
- **대표**: 차경선

---

*이 문서는 롤스티커 견적서 시스템의 전체 로직과 루틴을 설명합니다.*
*실제 단가는 시장 상황에 따라 변동될 수 있습니다.*
