--- tbl_properties.inc.php (original)
+++ tbl_properties.inc.php (modified)
@@ -4,12 +4,12 @@
 
 
 ?>
-<form method="post" action="<?php echo $action; ?>">
-    <input type="hidden" name="server" value="<?php echo $server; ?>" />
-    <input type="hidden" name="lang" value="<?php echo $lang; ?>" />
-    <input type="hidden" name="convcharset" value="<?php echo $convcharset; ?>" />
-    <input type="hidden" name="db" value="<?php echo htmlspecialchars($db); ?>" />
-    <input type="hidden" name="table" value="<?php echo htmlspecialchars($table); ?>" />
+<form method="post" action="<?php echo  $action ?>">
+    <input type="hidden" name="server" value="<?php echo  $server ?>" />
+    <input type="hidden" name="lang" value="<?php echo  $lang ?>" />
+    <input type="hidden" name="convcharset" value="<?php echo  $convcharset ?>" />
+    <input type="hidden" name="db" value="<?php echo  htmlspecialchars($db) ?>" />
+    <input type="hidden" name="table" value="<?php echo  htmlspecialchars($table) ?>" />
 <?php
 if ($action == 'tbl_create.php') {
     ?>
@@ -19,22 +19,22 @@
 else if ($action == 'tbl_addfield.php') {
     echo "\n";
     ?>
-    <input type="hidden" name="after_field" value="<?php echo $after_field; ?>" />
+    <input type="hidden" name="after_field" value="<?php echo  $after_field ?>" />
     <?php
 }
 echo "\n";
 $is_backup = ($action != 'tbl_create.php' && $action != 'tbl_addfield.php');
 ?>
 
-    <table border="<?php echo $cfg['Border']; ?>">
+    <table border="<?php echo  $cfg['Border'] ?>">
     <tr>
-        <th><?php echo $strField; ?></th>
-        <th><?php echo $strType . '<br /><span style="font-weight: normal">' . PMA_showMySQLDocu('Reference', 'Column_types'); ?></span></th>
-        <th><?php echo $strLengthSet; ?></th>
-        <th><?php echo $strAttr; ?></th>
-        <th><?php echo $strNull; ?></th>
-        <th><?php echo $strDefault; ?></th>
-        <th><?php echo $strExtra; ?></th>
+        <th><?php echo  $strField ?></th>
+        <th><?php echo  $strType . '<br /><span style="font-weight: normal">' . PMA_showMySQLDocu('Reference', 'Column_types') ?></span></th>
+        <th><?php echo  $strLengthSet ?></th>
+        <th><?php echo  $strAttr ?></th>
+        <th><?php echo  $strNull ?></th>
+        <th><?php echo  $strDefault ?></th>
+        <th><?php echo  $strExtra ?></th>
 <?php
 // lem9: We could remove this 'if' and let the key information be shown and
 // editable. However, for this to work, tbl_alter must be modified to use the
@@ -58,7 +58,7 @@
     $bgcolor = ($i % 2) ? $cfg['BgcolorOne'] : $cfg['BgcolorTwo'];
     ?>
     <tr>
-        <td bgcolor="<?php echo $bgcolor; ?>">
+        <td bgcolor="<?php echo  $bgcolor ?>">
     <?php
     if ($is_backup) {
         echo "\n";
@@ -70,7 +70,7 @@
     ?>
             <input type="text" name="field_name[]" size="10" maxlength="64" value="<?php if (isset($row) && isset($row['Field'])) echo str_replace('"', '&quot;', $row['Field']); ?>" class="textfield" />
         </td>
-        <td bgcolor="<?php echo $bgcolor; ?>">
+        <td bgcolor="<?php echo  $bgcolor ?>">
             <select name="field_type[]">
     <?php
     echo "\n";
@@ -84,19 +84,19 @@
     else {
         $type        = $row['Type'];
     }
-    $type   = eregi_replace('BINARY', '', $type);
-    $type   = eregi_replace('ZEROFILL', '', $type);
-    $type   = eregi_replace('UNSIGNED', '', $type);
+    $type   = preg_replace('BINARY', '', $type);
+    $type   = preg_replace('ZEROFILL', '', $type);
+    $type   = preg_replace('UNSIGNED', '', $type);
     // set or enum types: slashes single quotes inside options
-    if (eregi('^(set|enum)\((.+)\)$', $type, $tmp)) {
+    if (preg_match('^(set|enum)\((.+)\)$', $type, $tmp)) {
         $type   = $tmp[1];
-        $length = substr(ereg_replace('([^,])\'\'', '\\1\\\'', ',' . $tmp[2]), 1);
+        $length = substr(preg_replace('([^,])\'\'', '\\1\\\'', ',' . $tmp[2]), 1);
     } else {
         $length = $type;
-        $type   = chop(eregi_replace('\\(.*\\)', '', $type));
+        $type   = chop(preg_replace('\\(.*\\)', '', $type));
         if (!empty($type)) {
-            $length = eregi_replace("^$type\(", '', $length);
-            $length = eregi_replace('\)$', '', trim($length));
+            $length = preg_replace("^$type\(", '', $length);
+            $length = preg_replace('\)$', '', trim($length));
         }
         if ($length == $type) {
             $length = '';
@@ -113,25 +113,25 @@
     ?>
             </select>
         </td>
-        <td bgcolor="<?php echo $bgcolor; ?>">
+        <td bgcolor="<?php echo  $bgcolor ?>">
     <?php
     if ($is_backup) {
         echo "\n";
         ?>
-            <input type="hidden" name="field_length_orig[]" value="<?php echo urlencode($length); ?>" />
-        <?php
-    }
-    echo "\n";
-    ?>
-            <input type="text" name="field_length[]" size="8" value="<?php echo str_replace('"', '&quot;', $length); ?>" class="textfield" />
-        </td>
-        <td bgcolor="<?php echo $bgcolor; ?>">
+            <input type="hidden" name="field_length_orig[]" value="<?php echo  urlencode($length) ?>" />
+        <?php
+    }
+    echo "\n";
+    ?>
+            <input type="text" name="field_length[]" size="8" value="<?php echo  str_replace('"', '&quot;', $length) ?>" class="textfield" />
+        </td>
+        <td bgcolor="<?php echo  $bgcolor ?>">
             <select name="field_attribute[]">
     <?php
     echo "\n";
-    $binary           = eregi('BINARY', $row['Type'], $test_attribute1);
-    $unsigned         = eregi('UNSIGNED', $row['Type'], $test_attribute2);
-    $zerofill         = eregi('ZEROFILL', $row['Type'], $test_attribute3);
+    $binary           = preg_match('BINARY', $row['Type'], $test_attribute1);
+    $unsigned         = preg_match('UNSIGNED', $row['Type'], $test_attribute2);
+    $zerofill         = preg_match('ZEROFILL', $row['Type'], $test_attribute3);
     $strAttribute     = '';
     if ($binary) {
         $strAttribute = 'BINARY';
@@ -152,7 +152,7 @@
     ?>
             </select>
         </td>
-        <td bgcolor="<?php echo $bgcolor; ?>">
+        <td bgcolor="<?php echo  $bgcolor ?>">
             <select name="field_null[]">
     <?php
     if (!isset($row) || empty($row['Null'])) {
@@ -179,7 +179,7 @@
     }
     echo "\n";
     ?>
-        <td bgcolor="<?php echo $bgcolor; ?>">
+        <td bgcolor="<?php echo  $bgcolor ?>">
     <?php
     if ($is_backup) {
         echo "\n";
@@ -191,7 +191,7 @@
     ?>
             <input type="text" name="field_default[]" size="8" value="<?php if(isset($row) && isset($row['Default'])) echo str_replace('"', '&quot;', $row['Default']); ?>" class="textfield" />
         </td>
-        <td bgcolor="<?php echo $bgcolor; ?>">
+        <td bgcolor="<?php echo  $bgcolor ?>">
             <select name="field_extra[]">
     <?php
     if(!isset($row) || empty($row['Extra'])) {
@@ -242,24 +242,24 @@
         }
         echo "\n";
         ?>
-        <td align="center" bgcolor="<?php echo $bgcolor; ?>">
-            <input type="radio" name="field_key_<?php echo $i; ?>" value="primary_<?php echo $i; ?>"<?php echo $checked_primary; ?> />
-        </td>
-        <td align="center" bgcolor="<?php echo $bgcolor; ?>">
-            <input type="radio" name="field_key_<?php echo $i; ?>" value="index_<?php echo $i; ?>"<?php echo $checked_index; ?> />
-        </td>
-        <td align="center" bgcolor="<?php echo $bgcolor; ?>">
-            <input type="radio" name="field_key_<?php echo $i; ?>" value="unique_<?php echo $i; ?>"<?php echo $checked_unique; ?> />
-        </td>
-        <td align="center" bgcolor="<?php echo $bgcolor; ?>">
-            <input type="radio" name="field_key_<?php echo $i; ?>" value="none_<?php echo $i; ?>"<?php echo $checked_none; ?> />
+        <td align="center" bgcolor="<?php echo  $bgcolor ?>">
+            <input type="radio" name="field_key_<?php echo  $i ?>" value="primary_<?php echo  $i ?>"<?php echo  $checked_primary ?> />
+        </td>
+        <td align="center" bgcolor="<?php echo  $bgcolor ?>">
+            <input type="radio" name="field_key_<?php echo  $i ?>" value="index_<?php echo  $i ?>"<?php echo  $checked_index ?> />
+        </td>
+        <td align="center" bgcolor="<?php echo  $bgcolor ?>">
+            <input type="radio" name="field_key_<?php echo  $i ?>" value="unique_<?php echo  $i ?>"<?php echo  $checked_unique ?> />
+        </td>
+        <td align="center" bgcolor="<?php echo  $bgcolor ?>">
+            <input type="radio" name="field_key_<?php echo  $i ?>" value="none_<?php echo  $i ?>"<?php echo  $checked_none ?> />
         </td>
         <?php
         if (PMA_MYSQL_INT_VERSION >= 32323) {
             echo "\n";
             ?>
-        <td bgcolor="<?php echo $bgcolor; ?>" nowrap="nowrap">
-            <input type="checkbox" name="field_fulltext[]" value="<?php echo $i; ?>"<?php echo $checked_fulltext; ?> />
+        <td bgcolor="<?php echo  $bgcolor ?>" nowrap="nowrap">
+            <input type="checkbox" name="field_fulltext[]" value="<?php echo  $i ?>"<?php echo  $checked_fulltext ?> />
         </td>
             <?php
         } // end if (PMA_MYSQL_INT_VERSION >= 32323)
@@ -281,13 +281,13 @@
     ?>
     <table>
     <tr valign="top">
-        <td><?php echo $strTableComments; ?>&nbsp;:</td>
+        <td><?php echo  $strTableComments ?>&nbsp;:</td>
     <?php
     if ($action == 'tbl_create.php') {
         echo "\n";
         ?>
         <td width="25">&nbsp;</td>
-        <td><?php echo $strTableType; ?>&nbsp;:</td>
+        <td><?php echo  $strTableType ?>&nbsp;:</td>
         <?php
     }
     echo "\n";
@@ -304,7 +304,7 @@
         // find mysql capability - staybyte - 11. June 2001
         $query = 'SHOW VARIABLES LIKE \'have_%\'';
         $result = PMA_mysql_query($query);
-        if ($result != FALSE && mysql_num_rows($result) > 0) {
+        if ($result != FALSE && mysqli_num_rows($result) > 0) {
             while ($tmp = PMA_mysql_fetch_array($result)) {
                 if (isset($tmp['Variable_name'])) {
                     switch ($tmp['Variable_name']) {
@@ -332,14 +332,14 @@
                 } // end if
             } // end while
         } // end if
-        mysql_free_result($result);
+        mysqli_free_result($result);
 
         echo "\n";
         ?>
         <td width="25">&nbsp;</td>
         <td>
             <select name="tbl_type">
-                <option value="Default"><?php echo $strDefault; ?></option>
+                <option value="Default"><?php echo  $strDefault ?></option>
                 <option value="MYISAM">MyISAM</option>
                 <option value="HEAP">Heap</option>
                 <option value="MERGE">Merge</option>
@@ -362,17 +362,18 @@
 // END - Table Type - 2 May 2001 - Robbat2
 ?>
 
-<input type="submit" name="submit" value="<?php echo $strSave; ?>" />
+<input type="submit" name="submit" value="<?php echo  $strSave ?>" />
 </form>
 
 <table>
 <tr>
     <td valign="top">*&nbsp;</td>
     <td>
-        <?php echo $strSetEnumVal . "\n"; ?>
+        <?php echo  $strSetEnumVal . "\n" ?>
     </td>
 </tr>
 </table>
 <br />
 
-<center><?php echo PMA_showMySQLDocu('Reference', 'CREATE_TABLE'); ?></center>
+<center><?php echo  PMA_showMySQLDocu('Reference', 'CREATE_TABLE') ?></center>
+?>