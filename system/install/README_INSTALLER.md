# 설치 마법사 사용 설명서

**두손 프린트 시스템 v1.0**

---

## 목차

1. [시스템 개요](#1-시스템-개요)
2. [설치 전 준비사항](#2-설치-전-준비사항)
3. [설치 방법 (8단계)](#3-설치-방법-8단계)
4. [설치 후 확인사항](#4-설치-후-확인사항)
5. [재설치 방법](#5-재설치-방법)
6. [생성되는 설정 파일](#6-생성되는-설정-파일)
7. [파일 구조](#7-파일-구조)
8. [문제 해결 (FAQ)](#8-문제-해결-faq)
9. [호스팅별 설치 팁](#9-호스팅별-설치-팁)

---

## 1. 시스템 개요

설치 마법사는 웹 브라우저에서 8단계를 따라가며 두손 프린트 시스템을 설치할 수 있는 도구입니다.

**주요 특징:**

- **웹 브라우저만으로 설치** — 서버 터미널(SSH) 접속이 필요 없습니다
- **8단계 안내형 설치** — 순서대로 따라가면 자동으로 설치가 완료됩니다
- **한국 공유 호스팅 대응** — cafe24, gabia 등에서 바로 사용 가능
- **외부 라이브러리 불필요** — Composer 등 별도 도구가 필요 없습니다
- **자동 생성** — 설정 파일, 데이터베이스 테이블, 관리자 계정이 자동으로 만들어집니다

---

## 2. 설치 전 준비사항

### 서버 요구사항

| 항목 | 요구사항 | 비고 |
|------|----------|------|
| PHP | 7.4 이상 | 필수 |
| MySQL | 5.7 이상 | 필수 |
| mysqli 확장 | 설치됨 | 필수 |
| mbstring 확장 | 설치됨 | 필수 (한글 처리) |
| GD 라이브러리 | 설치됨 | 필수 (이미지 처리) |
| JSON 확장 | 설치됨 | 필수 |
| Zlib 확장 | 설치됨 | 필수 (백업 압축) |
| Fileinfo 확장 | 설치됨 | 권장 (파일 업로드 검증) |
| config/ 디렉토리 | 쓰기 가능 | 필수 |
| uploads/ 디렉토리 | 쓰기 가능 | 권장 |

> 대부분의 한국 공유 호스팅에서는 위 요구사항이 기본으로 충족됩니다.

### 미리 준비할 정보

설치 과정에서 다음 정보가 필요합니다. 호스팅 관리 페이지에서 미리 확인해 두세요.

**필수 정보:**
- MySQL 호스트명 (보통 `localhost`)
- MySQL 사용자명, 비밀번호
- MySQL 데이터베이스 이름
- 상호명, 전화번호, 이메일
- 라이선스 키

**선택 정보 (나중에 설정 가능):**
- KG이니시스 PG 상점 MID, API 키
- 계좌이체 정보 (은행명, 계좌번호, 예금주)
- 사업자등록번호, 대표자명, 주소
- 상점 로고 이미지

---

## 3. 설치 방법 (8단계)

웹 브라우저에서 다음 주소로 접속합니다:

```
https://도메인/system/install/
```

---

### 단계 1: 서버 환경 확인

서버가 설치 요구사항을 충족하는지 자동으로 점검합니다.

**확인 항목 (10가지):**

| 항목 | 구분 |
|------|------|
| PHP 버전 (7.4 이상) | 필수 |
| MySQLi 확장 | 필수 |
| mbstring 확장 | 필수 |
| GD 라이브러리 | 필수 |
| JSON 확장 | 필수 |
| Zlib 확장 | 필수 |
| Fileinfo 확장 | 권장 |
| config/ 쓰기 권한 | 필수 |
| SQL 설치 파일 | 필수 |
| uploads/ 쓰기 권한 | 권장 |

- **"통과"** — 정상
- **"경고"** — 선택사항으로, 설치는 가능하지만 일부 기능이 제한될 수 있습니다
- **"실패"** — 필수 항목이 실패하면 해결 후 다시 시도해야 합니다

모든 필수 항목이 통과되면 **"다음 단계"** 버튼을 클릭합니다.

---

### 단계 2: 라이선스 인증

구매 시 발급받은 라이선스 키를 입력합니다.

**라이선스 키 형식:**
```
DUSON-XXXX-XXXX-XXXX
```

**평가판 키 (무료 체험):**

| 키 | 용도 |
|----|------|
| `DUSON-FREE-TRIAL-2026` | 무료 평가판 |
| `DUSON-BETA-TEST-2026` | 베타 테스트용 |
| `DUSON-DEMO-MODE-2026` | 데모 시연용 |

- 인터넷 연결 없이 오프라인으로 인증됩니다.
- 키를 입력한 후 **"다음 단계"** 버튼을 클릭합니다.

---

### 단계 3: 데이터베이스 설정

MySQL 데이터베이스 접속 정보를 입력합니다.

| 필드 | 설명 | 예시 |
|------|------|------|
| 호스트 | MySQL 서버 주소 | `localhost` |
| 포트 | MySQL 접속 포트 | `3306` (기본값) |
| 데이터베이스 이름 | 사용할 DB 이름 | `duson_print` |
| 사용자명 | MySQL 계정 | 호스팅에서 발급받은 계정 |
| 비밀번호 | MySQL 비밀번호 | 호스팅에서 발급받은 비밀번호 |

**"데이터베이스가 없으면 자동 생성" 체크박스:**

- **체크 시:** 입력한 이름의 DB가 없으면 자동으로 생성합니다.
  - MySQL 계정에 CREATE DATABASE 권한이 필요합니다.
  - 일부 공유 호스팅(cafe24 등)에서는 이 권한이 없을 수 있습니다.
- **체크 해제 시:** 이미 생성되어 있는 DB를 사용합니다.
  - 호스팅 관리 페이지에서 미리 DB를 생성해 두어야 합니다.

**"연결 테스트" 버튼:**
- 입력한 정보로 DB 접속이 되는지 미리 확인할 수 있습니다.
- "연결 성공" 메시지가 나오면 정상입니다.

확인 후 **"다음 단계"** 버튼을 클릭합니다.

---

### 단계 4: 상점 정보

인쇄소의 기본 정보를 입력합니다. 이 정보는 견적서, 주문서, 고객 화면에 표시됩니다.

**필수 입력:**

| 필드 | 설명 |
|------|------|
| 상호명 | 인쇄소 이름 (예: 두손기획인쇄) |
| 전화번호 | 고객 문의 전화번호 |
| 이메일 | 고객 문의 이메일 |

**선택 입력:**

| 필드 | 설명 |
|------|------|
| 대표자명 | 사업자 대표 이름 |
| 사업자등록번호 | 세금계산서 발행에 사용 |
| 팩스번호 | 팩스 문의 번호 |
| 주소 | 인쇄소 소재지 |
| 로고 이미지 | JPG, PNG, GIF / 최대 2MB / 권장 300x100px |

입력 후 **"다음 단계"** 버튼을 클릭합니다.

---

### 단계 5: 제품 선택

운영할 인쇄 제품을 선택합니다. 나중에 관리자 페이지에서 변경할 수 있습니다.

| 제품 | 폴더명 | 단위 | 설명 |
|------|--------|------|------|
| 전단지 | inserted | 연 | 전단지, 리플렛, 홍보물 |
| 스티커 | sticker_new | 매 | 일반/원형/타원형 스티커 |
| 자석스티커 | msticker | 매 | 자석 부착형 스티커 |
| 명함 | namecard | 매 | 일반/고급 명함 |
| 봉투 | envelope | 매 | 소봉투, 대봉투, 규격봉투 |
| 포스터 | littleprint | 매 | 소량 포스터, 실사출력 |
| 상품권 | merchandisebond | 매 | 상품권, 쿠폰, 이용권 |
| 카다록 | cadarok | 부 | 카탈로그, 소책자 |
| NCR양식지 | ncrflambeau | 권 | 복사식 양식지 (2~5매) |

- 기본값: 전체 선택 (9개)
- 최소 1개 이상 선택해야 합니다.
- "전체 선택" / "전체 해제" 버튼으로 간편하게 변경 가능합니다.

선택 후 **"다음 단계"** 버튼을 클릭합니다.

---

### 단계 6: 결제 설정

온라인 결제 및 계좌이체 정보를 설정합니다. **모든 항목이 선택사항**이며, 나중에 설정할 수 있습니다.

**PG사 설정 (KG이니시스):**

| 필드 | 설명 |
|------|------|
| 상점 MID | KG이니시스에서 발급받은 상점 아이디 |
| API 키 | 결제 연동에 필요한 API 키 |
| API 시크릿 | 결제 연동에 필요한 시크릿 키 |
| 테스트 모드 | 체크 시 실결제 없이 테스트 (기본: 체크됨) |

**계좌이체 정보:**

| 필드 | 설명 |
|------|------|
| 은행명 | 드롭다운에서 선택 |
| 예금주 | 계좌 소유자 이름 |
| 계좌번호 | 입금 계좌번호 |

> PG 정보가 없어도 설치를 진행할 수 있습니다. 계좌이체만으로 운영하거나, 나중에 PG 설정을 추가할 수 있습니다.

**"다음 단계"** 버튼을 클릭합니다.

---

### 단계 7: 관리자 계정

시스템 관리자 계정을 생성합니다. 설치 후 이 계정으로 관리자 페이지에 로그인합니다.

**필수 입력:**

| 필드 | 조건 |
|------|------|
| 관리자 아이디 | 4자 이상, 영문/숫자 |
| 비밀번호 | 8자 이상 |
| 비밀번호 확인 | 위와 동일하게 재입력 |
| 이메일 | 올바른 이메일 형식 |

**선택 입력:**

| 필드 | 설명 |
|------|------|
| 이름 | 관리자 표시 이름 |

- 비밀번호 입력 시 강도 표시가 나타납니다 (약함 → 보통 → 강함 → 매우 강함).
- 대문자, 소문자, 숫자, 특수문자를 섞으면 더 안전합니다.
- 비밀번호가 일치하지 않으면 경고 메시지가 표시됩니다.

모두 입력한 후 **"설치 시작"** 버튼을 클릭합니다.

---

### 단계 8: 설치 실행

버튼을 클릭하면 자동으로 설치가 진행됩니다. **브라우저를 닫지 마세요.**

**자동 실행 순서 (5단계):**

| 순서 | 작업 | 설명 |
|------|------|------|
| 1 | 데이터베이스 생성/확인 | DB가 없으면 생성, 있으면 확인 |
| 2 | 테이블 생성 | 주문, 회원, 제품 등 필요한 테이블 생성 |
| 3 | 초기 데이터 입력 | 기본 설정값, 제품 정보 등 입력 |
| 4 | 설정 파일 생성 | `config/site.php` 파일 자동 생성 |
| 5 | 관리자 계정 생성 | 입력한 아이디/비밀번호로 관리자 생성 |

- 각 단계가 완료될 때마다 체크 표시가 나타납니다.
- 모든 단계가 완료되면 성공 메시지와 함께 링크가 표시됩니다:
  - **"사이트 바로가기"** — 메인 페이지로 이동
  - **"관리자 페이지"** — 관리자 로그인 페이지로 이동

---

## 4. 설치 후 확인사항

설치가 완료되면 다음을 확인하세요:

### 필수 확인

1. **관리자 로그인 테스트**
   - `https://도메인/admin/` 에 접속
   - 설치 시 입력한 아이디/비밀번호로 로그인

2. **메인 페이지 확인**
   - `https://도메인/` 에 접속
   - 상점 이름과 메뉴가 정상 표시되는지 확인

3. **설정 파일 확인**
   - `config/site.php` 파일이 생성되었는지 FTP에서 확인

### 보안 조치 (필수!)

> **설치가 완료되면 `system/install/` 폴더를 반드시 삭제하세요.**
>
> 삭제하지 않으면 누구나 설치 마법사에 접근하여 시스템 정보를 볼 수 있습니다.

FTP에서 `system/install/` 폴더 전체를 삭제하거나, 내 컴퓨터에 백업 후 서버에서 삭제합니다.

---

## 5. 재설치 방법

시스템을 처음부터 다시 설치해야 하는 경우:

1. `config/site.php` 파일을 FTP에서 삭제합니다.
2. `system/install/` 폴더가 서버에 있는지 확인합니다 (삭제했다면 다시 업로드).
3. `https://도메인/system/install/` 에 접속하면 설치 마법사가 다시 나타납니다.

**주의사항:**
- 기존 데이터베이스 테이블은 유지됩니다 (기존 테이블이 있으면 건너뜁니다).
- 관리자 계정이 새로 추가되어 중복될 수 있습니다.
- 완전히 초기화하려면 데이터베이스를 먼저 비운 후 재설치하세요.

---

## 6. 생성되는 설정 파일

설치가 완료되면 `config/site.php` 파일이 자동 생성됩니다. 이 파일에는 다음 설정이 포함됩니다:

| 구분 | 설정 항목 |
|------|-----------|
| 데이터베이스 | DB_HOST, DB_PORT, DB_NAME, DB_USER, DB_PASS, DB_CHARSET |
| 상점 정보 | SHOP_NAME, SHOP_OWNER, SHOP_PHONE, SHOP_FAX, SHOP_EMAIL, SHOP_ADDRESS, SHOP_BIZ_NUMBER, SHOP_LOGO |
| 라이선스 | LICENSE_KEY |
| 활성 제품 | ACTIVE_PRODUCTS (선택한 제품 목록) |
| PG사 설정 | PG_PROVIDER, PG_MID, PG_API_KEY, PG_API_SECRET, PG_TEST_MODE |
| 계좌이체 | BANK_NAME, BANK_ACCOUNT, BANK_HOLDER |
| 시스템 | INSTALLED, INSTALL_DATE, SYSTEM_VERSION |

> 이 파일을 직접 편집하지 마세요. 설정 변경은 관리자 페이지에서 하는 것을 권장합니다.

---

## 7. 파일 구조

```
system/install/
├── index.php              # 설치 마법사 메인 화면 (8단계)
├── ajax.php               # DB 테스트, 설치 실행 처리
├── InstallerEngine.php    # 설치 엔진 (핵심 로직)
├── README_INSTALLER.md    # 이 문서
├── assets/
│   └── installer.css      # 설치 화면 디자인
└── sql/
    ├── schema.sql         # 데이터베이스 테이블 구조
    └── seed.sql           # 초기 설정 데이터
```

---

## 8. 문제 해결 (FAQ)

### "DB 연결 실패" 오류

- 호스팅에서 발급받은 MySQL 정보가 정확한지 확인하세요.
- 호스트가 `localhost`인지 확인하세요. 일부 호스팅은 별도 DB 서버 주소를 사용합니다.
- MySQL 사용자명과 비밀번호를 다시 확인하세요.

### "데이터베이스 생성 실패" 오류

- MySQL 계정에 CREATE DATABASE 권한이 없는 경우 발생합니다.
- **해결 방법:** 호스팅 관리 페이지에서 DB를 미리 생성한 후, 설치 시 "데이터베이스가 없으면 자동 생성" 체크를 **해제**하세요.

### "config/ 디렉토리 쓰기 불가" 오류

- FTP에서 `config/` 폴더의 권한을 `755` 또는 `775`로 변경하세요.
- `config/` 폴더가 없다면 직접 생성하세요.

### 설치 완료 후 페이지가 안 뜸

- 브라우저 캐시를 삭제하고 다시 접속해 보세요.
- 서버의 웹 서비스(Apache/Nginx)가 정상 실행 중인지 확인하세요.
- `config/site.php` 파일이 정상적으로 생성되었는지 FTP에서 확인하세요.

### 관리자 로그인이 안 됨

- 설치 시 입력한 아이디와 비밀번호를 다시 확인하세요.
- 비밀번호는 대소문자를 구분합니다.

### "이미 설치가 완료된 시스템입니다" 메시지

- 이미 설치가 완료되어 `config/site.php` 파일이 존재합니다.
- 재설치하려면 `config/site.php` 파일을 삭제하고 다시 접속하세요.

### 설치 중 화면이 멈춤

- 브라우저를 닫지 말고 최대 1분 정도 기다려 보세요.
- 데이터베이스 크기에 따라 테이블 생성에 시간이 걸릴 수 있습니다.
- 그래도 멈춰 있다면 페이지를 새로고침하고, `config/site.php` 파일이 생성되었는지 확인하세요.

---

## 9. 호스팅별 설치 팁

### cafe24

| 항목 | 방법 |
|------|------|
| MySQL 정보 확인 | 호스팅 관리 > MySQL 관리 |
| DB 생성 | MySQL 관리에서 직접 생성 (자동 생성 불가) |
| 파일 업로드 | FTP 또는 파일 매니저 |
| PHP 버전 확인 | 호스팅 관리 > PHP 버전 설정 |
| 설치 시 주의 | "자동 생성" 체크 해제, 미리 생성한 DB 이름 입력 |

### gabia

| 항목 | 방법 |
|------|------|
| MySQL 정보 확인 | 서비스 관리 > 웹 호스팅 > DB 관리 |
| DB 생성 | DB 관리에서 직접 생성 |
| 파일 업로드 | FTP |
| PHP 버전 확인 | 서비스 관리 > 웹 호스팅 > PHP 설정 |

### 일반 리눅스 서버 (VPS, 클라우드)

| 항목 | 방법 |
|------|------|
| 파일 업로드 | FTP 또는 SCP/SFTP |
| 디렉토리 권한 | `chmod 755 config/ uploads/` |
| DB 생성 | MySQL 콘솔 또는 phpMyAdmin |
| "자동 생성" | CREATE DATABASE 권한이 있으면 사용 가능 |

### 공통 팁

1. 파일 업로드 후 웹 브라우저에서 `https://도메인/system/install/` 에 접속합니다.
2. 단계 1에서 모든 항목이 "통과"인지 확인합니다.
3. "실패" 항목이 있으면 호스팅 고객센터에 문의하세요.
4. 설치 완료 후 **반드시 `system/install/` 폴더를 삭제**하세요.

---

*마지막 업데이트: 2026-02-01*
*두손 프린트 시스템 v1.0*
