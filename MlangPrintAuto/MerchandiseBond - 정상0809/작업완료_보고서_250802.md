# μƒν’κ¶ νμ΄μ§€ ν†µν•© μ‘μ—… μ™„λ£ λ³΄κ³ μ„

## π“… μ‘μ—… μΌμ‹
2025λ…„ 8μ›” 2μΌ

## π― μ‘μ—… λ©ν‘
λ΄‰ν¬ νμ΄μ§€(`/envelope/index.php`)μ™€ λ™μΌν• κΈ°λ¥μ„ μƒν’κ¶ νμ΄μ§€(`/MerchandiseBond/index.php`)μ— μ μ©
- κ³µν†µ ν—¤λ”/ν‘Έν„°/λ„¤λΉ„κ²μ΄μ… μ μ©
- "μ£Όλ¬Έν•κΈ°" λ²„νΌμ„ "μ¥λ°”κµ¬λ‹ λ‹΄κΈ°" + "λ°”λ΅ μ£Όλ¬Έν•κΈ°" λ²„νΌμΌλ΅ κµμ²΄
- λ™μΌν• μ‚¬μ©μ κ²½ν— μ κ³µ

## β… μ™„λ£λ μ‘μ—…

### 1. κ³µν†µ νμΌ μ μ©
**μμ •λ νμΌ**: `MlangPrintAuto/MerchandiseBond/index.php`

#### ν—¤λ” λ¶€λ¶„ κµμ²΄:
```php
// κΈ°μ΅΄: λ…λ¦½μ μΈ λ΅κ·ΈμΈ μ²λ¦¬ λ° ν—¤λ”
// λ³€κ²½: κ³µν†µ νμΌ μ‚¬μ©
include "../../includes/auth.php";
include "../../includes/header.php";
include "../../includes/nav.php";
```

#### ν‘Έν„° λ¶€λ¶„ κµμ²΄:
```php
// κΈ°μ΅΄: λ…λ¦½μ μΈ ν‘Έν„° λ° λ΅κ·ΈμΈ λ¨λ‹¬
// λ³€κ²½: κ³µν†µ νμΌ μ‚¬μ©
include "../../includes/login_modal.php";
include "../../includes/footer.php";
```

### 2. λ²„νΌ μ‹μ¤ν… κµμ²΄
**κΈ°μ΅΄**: λ‹¨μΌ "μ£Όλ¬Έν•κΈ°" λ²„νΌ
```html
<input type="button" onClick="CheckTotal('OrderOne');" value="μ£Όλ¬Έν•κΈ°" class="form-submit">
```

**λ³€κ²½**: μ΄μ¤‘ λ²„νΌ μ‹μ¤ν…
```html
<div class="form-group" style="display: flex; gap: 1rem; margin-top: 1.5rem;">
    <button type="button" onclick="addToBasket()" class="form-submit" style="flex: 1; background: #28a745;">
        π›’ μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ°
    </button>
    <button type="button" onclick="directOrder()" class="form-submit" style="flex: 1; background: #007bff;">
        π“‹ λ°”λ΅ μ£Όλ¬Έν•κΈ°
    </button>
</div>
```

### 3. JavaScript ν•¨μ μ¶”κ°€
**νμΌ**: `MlangPrintAuto/MerchandiseBond/index.php`

#### μ¥λ°”κµ¬λ‹ μ¶”κ°€ ν•¨μ:
```javascript
function addToBasket() {
    var form = document.forms["choiceForm"];
    
    // ν•„μ κ°’ ν™•μΈ (MY_type, PN_type, MY_amount, POtype)
    // κ°€κ²© κ³„μ‚° ν™•μΈ
    // FormDataλ΅ AJAX μ”μ²­
    // μ„±κ³µ μ‹ μ¥λ°”κµ¬λ‹ νμ΄μ§€ μ΄λ™ μµμ… μ κ³µ
}
```

#### λ°”λ΅ μ£Όλ¬Έ ν•¨μ:
```javascript
function directOrder() {
    var form = document.forms["choiceForm"];
    
    // ν•„μ κ°’ ν™•μΈ
    // URL νλΌλ―Έν„°λ΅ μ£Όλ¬Έ μ •λ³΄ κµ¬μ„±
    // OnlineOrder_unified.phpλ΅ μ΄λ™
}
```

### 4. AJAX νμΌ μƒμ„±

#### μƒν’κ¶ μΆ…λ¥ μ΅°ν:
**νμΌ**: `MlangPrintAuto/MerchandiseBond/get_merchandisebond_types.php`
- κµ¬λ¶„(MY_type)μ— λ”°λ¥Έ μΆ…λ¥(PN_type) λ©λ΅ λ°ν™
- `MlangPrintAuto_transactionCate` ν…μ΄λΈ” μ΅°ν

#### κ°€κ²© κ³„μ‚°:
**νμΌ**: `MlangPrintAuto/MerchandiseBond/price_cal_ajax.php`
- μ„ νƒλ μµμ…μ— λ”°λ¥Έ κ°€κ²© κ³„μ‚°
- `MlangPrintAuto_MerchandiseBond` ν…μ΄λΈ” μ΅°ν
- JSON ν•νƒλ΅ κ°€κ²© μ •λ³΄ λ°ν™

#### μ¥λ°”κµ¬λ‹ μ¶”κ°€:
**νμΌ**: `MlangPrintAuto/MerchandiseBond/add_to_basket.php`
- `shop_temp` ν…μ΄λΈ”μ— μƒν’κ¶ μ •λ³΄ μ €μ¥
- μ„Έμ… κΈ°λ° μ¥λ°”κµ¬λ‹ κ΄€λ¦¬

#### μλ‰/μΈμ‡„λ©΄ μµμ…:
**νμΌ**: 
- `MlangPrintAuto/MerchandiseBond/get_merchandisebond_quantities.php`
- `MlangPrintAuto/MerchandiseBond/get_merchandisebond_sides.php`

### 5. μ£Όλ¬Έ νμ΄μ§€ μμ •
**νμΌ**: `MlangOrder_PrintAuto/OnlineOrder_unified.php`

#### μƒν’κ¶ μ§μ ‘ μ£Όλ¬Έ μ²λ¦¬ μ¶”κ°€:
```php
elseif ($product_type == 'merchandisebond') {
    // μƒν’κ¶ μ§μ ‘ μ£Όλ¬Έ
    $direct_item = [
        'id' => 'direct_order',
        'product_type' => 'merchandisebond',
        'type_text' => $_GET['type_text'] ?? '',
        'size_text' => $_GET['size_text'] ?? '',
        'quantity_text' => $_GET['quantity_text'] ?? '',
        'po_text' => $_GET['po_text'] ?? '',
        'design_text' => $_GET['design_text'] ?? '',
        // ... κΈ°νƒ€ ν•„λ“λ“¤
    ];
}
```

#### μƒν’κ¶ μ •λ³΄ ν‘μ‹ μ¶”κ°€:
```php
<?php elseif ($item['product_type'] == 'merchandisebond'): ?>
    <strong style="color: #2c3e50; font-size: 1.1rem;">π« μƒν’κ¶</strong>
    <div style="margin-top: 0.5rem;">
        <span><strong>μΆ…λ¥:</strong> <?php echo htmlspecialchars($item['type_text']); ?></span>
        <span><strong>ν›„κ°€κ³µ:</strong> <?php echo htmlspecialchars($item['size_text']); ?></span>
        <span><strong>μλ‰:</strong> <?php echo htmlspecialchars($item['quantity_text']); ?></span>
        <span><strong>μΈμ‡„λ©΄:</strong> <?php echo htmlspecialchars($item['po_text']); ?></span>
        <span><strong>μ£Όλ¬Έλ°©λ²•:</strong> <?php echo htmlspecialchars($item['design_text']); ?></span>
    </div>
<?php endif; ?>
```

### 6. ν…μ¤νΈ νμΌ μƒμ„±
**νμΌ**: `MlangPrintAuto/MerchandiseBond/test_basket.php`
- μ¥λ°”κµ¬λ‹ κΈ°λ¥ ν…μ¤νΈμ©
- λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° λ° ν…μ΄λΈ” μƒμ„± ν™•μΈ
- AJAX μ”μ²­ ν…μ¤νΈ

## π—‚οΈ μƒμ„±/μμ •λ νμΌ λ©λ΅

### μμ •λ νμΌ:
1. `MlangPrintAuto/MerchandiseBond/index.php` - λ©”μΈ μƒν’κ¶ νμ΄μ§€
2. `MlangOrder_PrintAuto/OnlineOrder_unified.php` - ν†µν•© μ£Όλ¬Έ νμ΄μ§€

### μƒμ„±λ νμΌ:
1. `MlangPrintAuto/MerchandiseBond/get_merchandisebond_types.php` - μΆ…λ¥ μ΅°ν API
2. `MlangPrintAuto/MerchandiseBond/price_cal_ajax.php` - κ°€κ²© κ³„μ‚° API
3. `MlangPrintAuto/MerchandiseBond/add_to_basket.php` - μ¥λ°”κµ¬λ‹ μ¶”κ°€ API
4. `MlangPrintAuto/MerchandiseBond/get_merchandisebond_quantities.php` - μλ‰ μµμ… API
5. `MlangPrintAuto/MerchandiseBond/get_merchandisebond_sides.php` - μΈμ‡„λ©΄ μµμ… API
6. `MlangPrintAuto/MerchandiseBond/test_basket.php` - ν…μ¤νΈ νμΌ

## π― κΈ°λ¥ λ™μ‘ νλ¦„

### μ¥λ°”κµ¬λ‹ λ‹΄κΈ°:
1. μ‚¬μ©μκ°€ λ¨λ“  μµμ… μ„ νƒ
2. κ°€κ²© κ³„μ‚° μ™„λ£ ν™•μΈ
3. `addToBasket()` ν•¨μ μ‹¤ν–‰
4. AJAXλ΅ `add_to_basket.php` μ”μ²­
5. `shop_temp` ν…μ΄λΈ”μ— λ°μ΄ν„° μ €μ¥
6. μ„±κ³µ μ‹ μ¥λ°”κµ¬λ‹ νμ΄μ§€ μ΄λ™ μµμ… μ κ³µ

### λ°”λ΅ μ£Όλ¬Έν•κΈ°:
1. μ‚¬μ©μκ°€ λ¨λ“  μµμ… μ„ νƒ
2. κ°€κ²© κ³„μ‚° μ™„λ£ ν™•μΈ
3. `directOrder()` ν•¨μ μ‹¤ν–‰
4. URL νλΌλ―Έν„°λ΅ μ£Όλ¬Έ μ •λ³΄ κµ¬μ„±
5. `OnlineOrder_unified.php`λ΅ μ΄λ™
6. μƒν’κ¶ μ •λ³΄κ°€ μ¬λ°”λ¥΄κ² ν‘μ‹λ¨

## π”§ κΈ°μ μ  κ°μ„ μ‚¬ν•­

### 1. μ¤λ¥ μ²λ¦¬ κ°•ν™”:
- PHP μ¤λ¥ μ¶λ ¥ λ°©μ§€ (`error_reporting(0)`)
- JSON μ‘λ‹µ ν—¤λ” μ„¤μ •
- μμ™Έ μ²λ¦¬ λ° μ•μ „ν• λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬

### 2. λ³΄μ• κ°•ν™”:
- Prepared Statement μ‚¬μ©
- μ…λ ¥κ°’ κ²€μ¦ λ° μ΄μ¤μΌ€μ΄ν”„ μ²λ¦¬
- XSS λ°©μ§€λ¥Ό μ„ν• `htmlspecialchars()` μ‚¬μ©

### 3. μ‚¬μ©μ κ²½ν— κ°μ„ :
- μ‹¤μ‹κ°„ κ°€κ²© κ³„μ‚°
- λ“λ΅­λ‹¤μ΄ μ—°λ™ μ‹μ¤ν…
- λ΅λ”© μƒνƒ ν‘μ‹
- μ¤λ¥ λ©”μ‹μ§€ ν‘μ‹

## π§ ν…μ¤νΈ κ²°κ³Ό

### β… μ •μƒ μ‘λ™ ν™•μΈ:
- μ¥λ°”κµ¬λ‹ μ¶”κ°€ κΈ°λ¥
- λ“λ΅­λ‹¤μ΄ μ—°λ™ μ‹μ¤ν…
- κ°€κ²© κ³„μ‚° κΈ°λ¥
- κ³µν†µ νμΌ μ μ©

### π” ν…μ¤νΈ λ°©λ²•:
1. `http://localhost/MlangPrintAuto/MerchandiseBond/index.php` μ ‘μ†
2. λ¨λ“  μµμ… μ„ νƒ ν›„ κ°€κ²© κ³„μ‚° ν™•μΈ
3. "π›’ μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ°" λ²„νΌ ν…μ¤νΈ
4. "π“‹ λ°”λ΅ μ£Όλ¬Έν•κΈ°" λ²„νΌ ν…μ¤νΈ
5. μ£Όλ¬Έ νμ΄μ§€μ—μ„ μƒν’κ¶ μ •λ³΄ ν‘μ‹ ν™•μΈ

## π“ μµμΆ… κ²°κ³Ό

**μƒν’κ¶ νμ΄μ§€κ°€ λ΄‰ν¬ νμ΄μ§€μ™€ μ™„μ „ν λ™μΌν• μ‚¬μ©μ κ²½ν—μ„ μ κ³µν•©λ‹λ‹¤:**

- β… κ³µν†µ λ””μμΈ λ° λ μ΄μ•„μ›ƒ
- β… λ™μΌν• λ²„νΌ μ‹μ¤ν…
- β… λ™μΌν• κΈ°λ¥ νλ¦„
- β… μΌκ΄€λ μ‚¬μ©μ μΈν„°νμ΄μ¤
- β… ν†µν•©λ μ¥λ°”κµ¬λ‹ μ‹μ¤ν…
- β… ν†µν•©λ μ£Όλ¬Έ μ‹μ¤ν…

## π€ ν–¥ν›„ ν™•μ¥ κ°€λ¥μ„±

μ΄λ² μ‘μ—…μΌλ΅ κµ¬μ¶•λ μ‹μ¤ν…μ€ λ‹¤λ¥Έ μ ν’ νμ΄μ§€μ—λ„ μ‰½κ² μ μ©ν•  μ μμµλ‹λ‹¤:
- λ…ν•¨ νμ΄μ§€
- μΉ΄λ‹¤λ΅ νμ΄μ§€  
- ν¬μ¤ν„° νμ΄μ§€
- κΈ°νƒ€ μΈμ‡„λ¬Ό νμ΄μ§€

λ™μΌν• ν¨ν„΄μΌλ΅ AJAX νμΌλ“¤μ„ μƒμ„±ν•κ³  μ£Όλ¬Έ νμ΄μ§€μ— μ ν’ νƒ€μ…μ„ μ¶”κ°€ν•λ©΄ λ©λ‹λ‹¤.

---

**μ‘μ—… μ™„λ£μΌ**: 2025λ…„ 8μ›” 2μΌ  
**μ‘μ—…μ**: Kiro AI Assistant  
**μƒνƒ**: β… μ™„λ£ λ° ν…μ¤νΈ ν†µκ³Ό