--- db_printview.php (original)
+++ db_printview.php (modified)
@@ -31,19 +31,19 @@
         $local_query  = 'SHOW OPEN TABLES FROM ' . PMA_backquote($db);
         $result        = PMA_mysql_query($local_query) or PMA_mysqlDie('', $local_query, '', $err_url);
         // Blending out tables in use
-        if ($result != FALSE && mysql_num_rows($result) > 0) {
+        if ($result != FALSE && mysqli_num_rows($result) > 0) {
             while ($tmp = PMA_mysql_fetch_array($result)) {
                 // if in use memorize tablename
-                if (eregi('in_use=[1-9]+', $tmp[0])) {
+                if (preg_match('in_use=[1-9]+', $tmp[0])) {
                     $sot_cache[$tmp[0]] = TRUE;
                 }
             }
-            mysql_free_result($result);
+            mysqli_free_result($result);
 
             if (isset($sot_cache)) {
                 $local_query = 'SHOW TABLES FROM ' . PMA_backquote($db);
                 $result      = PMA_mysql_query($local_query) or PMA_mysqlDie('', $local_query, '', $err_url);
-                if ($result != FALSE && mysql_num_rows($result) > 0) {
+                if ($result != FALSE && mysqli_num_rows($result) > 0) {
                     while ($tmp = PMA_mysql_fetch_array($result)) {
                         if (!isset($sot_cache[$tmp[0]])) {
                             $local_query = 'SHOW TABLE STATUS FROM ' . PMA_backquote($db) . ' LIKE \'' . addslashes($tmp[0]) . '\'';
@@ -54,7 +54,7 @@
                             $tables[]    = array('Name' => $tmp[0]);
                         }
                     }
-                    mysql_free_result($result);
+                    mysqli_free_result($result);
                     $sot_ready = TRUE;
                 }
             }
@@ -63,22 +63,22 @@
     if (!isset($sot_ready)) {
         $local_query = 'SHOW TABLE STATUS FROM ' . PMA_backquote($db);
         $result      = PMA_mysql_query($local_query) or PMA_mysqlDie('', $local_query, '', $err_url);
-        if ($result != FALSE && mysql_num_rows($result) > 0) {
+        if ($result != FALSE && mysqli_num_rows($result) > 0) {
             while ($sts_tmp = PMA_mysql_fetch_array($result)) {
                 $tables[] = $sts_tmp;
             }
-            mysql_free_result($result);
+            mysqli_free_result($result);
         }
     }
     $num_tables = (isset($tables) ? count($tables) : 0);
 } // end if (PMA_MYSQL_INT_VERSION >= 32303)
 else {
     $result     = PMA_mysql_list_tables($db);
-    $num_tables = ($result) ? @mysql_numrows($result) : 0;
+    $num_tables = ($result) ? @mysqli_numrows($result) : 0;
     for ($i = 0; $i < $num_tables; $i++) {
         $tables[] = PMA_mysql_tablename($result, $i);
     }
-    mysql_free_result($result);
+    mysqli_free_result($result);
 }
 
 
@@ -95,11 +95,11 @@
     ?>
 
 <!-- The tables list -->
-<table border="<?php echo $cfg['Border']; ?>">
-<tr>
-    <th>&nbsp;<?php echo $strTable; ?>&nbsp;</th>
-    <th><?php echo $strRecords; ?></th>
-    <th><?php echo $strType; ?></th>
+<table border="<?php echo  $cfg['Border'] ?>">
+<tr>
+    <th>&nbsp;<?php echo  $strTable ?>&nbsp;</th>
+    <th><?php echo  $strRecords ?></th>
+    <th><?php echo  $strType ?></th>
     <?php
     if ($cfg['ShowStats']) {
         echo '<th>' . $strSize . '</th>';
@@ -115,8 +115,8 @@
         echo "\n";
         ?>
 <tr>
-    <td bgcolor="<?php echo $bgcolor; ?>" nowrap="nowrap">
-        &nbsp;<b><?php echo htmlspecialchars($table); ?>&nbsp;</b>&nbsp;
+    <td bgcolor="<?php echo  $bgcolor ?>" nowrap="nowrap">
+        &nbsp;<b><?php echo  htmlspecialchars($table) ?>&nbsp;</b>&nbsp;
     </td>
         <?php
         echo "\n";
@@ -125,7 +125,7 @@
         if (isset($sts_data['Type'])) {
             if ($sts_data['Type'] == 'MRG_MyISAM') {
                 $mergetable = TRUE;
-            } else if (!eregi('ISAM|HEAP', $sts_data['Type'])) {
+            } else if (!preg_match('ISAM|HEAP', $sts_data['Type'])) {
                 $nonisam    = TRUE;
             }
         }
@@ -156,7 +156,7 @@
                 $unit          = '';
             }
             ?>
-    <td align="right" bgcolor="<?php echo $bgcolor; ?>">
+    <td align="right" bgcolor="<?php echo  $bgcolor ?>">
             <?php
             echo "\n" . '        ';
             if ($mergetable == TRUE) {
@@ -166,23 +166,23 @@
             }
             ?>
     </td>
-    <td nowrap="nowrap" bgcolor="<?php echo $bgcolor; ?>">
-        &nbsp;<?php echo (isset($sts_data['Type']) ? $sts_data['Type'] : '&nbsp;'); ?>&nbsp;
+    <td nowrap="nowrap" bgcolor="<?php echo  $bgcolor ?>">
+        &nbsp;<?php echo  (isset($sts_data['Type']) ? $sts_data['Type'] : '&nbsp;') ?>&nbsp;
     </td>
             <?php
             if ($cfg['ShowStats']) {
                 echo "\n";
                 ?>
-    <td align="right" bgcolor="<?php echo $bgcolor; ?>" nowrap="nowrap">
-        &nbsp;<?php echo $formated_size . ' ' . $unit . "\n"; ?>
+    <td align="right" bgcolor="<?php echo  $bgcolor ?>" nowrap="nowrap">
+        &nbsp;<?php echo  $formated_size . ' ' . $unit . "\n" ?>
     </td>
                 <?php
                 echo "\n";
             } // end if
         } else {
             ?>
-    <td colspan="3" align="center" bgcolor="<?php echo $bgcolor; ?>">
-        <?php echo $strInUse . "\n"; ?>
+    <td colspan="3" align="center" bgcolor="<?php echo  $bgcolor ?>">
+        <?php echo  $strInUse . "\n" ?>
     </td>
             <?php
         }
@@ -199,10 +199,10 @@
     ?>
 <tr>
     <th align="center">
-        &nbsp;<b><?php echo sprintf($strTables, number_format($num_tables, 0, $number_decimal_separator, $number_thousands_separator)); ?></b>&nbsp;
+        &nbsp;<b><?php echo  sprintf($strTables, number_format($num_tables, 0, $number_decimal_separator, $number_thousands_separator)) ?></b>&nbsp;
     </th>
     <th align="right" nowrap="nowrap">
-        <b><?php echo number_format($sum_entries, 0, $number_decimal_separator, $number_thousands_separator); ?></b>
+        <b><?php echo  number_format($sum_entries, 0, $number_decimal_separator, $number_thousands_separator) ?></b>
     </th>
     <th align="center">
         <b>--</b>
@@ -212,7 +212,7 @@
         echo "\n";
         ?>
     <th align="right" nowrap="nowrap">
-        <b><?php echo $sum_formated . ' ' . $unit; ?></b>
+        <b><?php echo  $sum_formated . ' ' . $unit ?></b>
     </th>
         <?php
     }
@@ -230,10 +230,10 @@
     ?>
 
 <!-- The tables list -->
-<table border="<?php echo $cfg['Border']; ?>">
-<tr>
-    <th>&nbsp;<?php echo $strTable; ?>&nbsp;</th>
-    <th><?php echo $strRecords; ?></th>
+<table border="<?php echo  $cfg['Border'] ?>">
+<tr>
+    <th>&nbsp;<?php echo  $strTable ?>&nbsp;</th>
+    <th><?php echo  $strRecords ?></th>
 </tr>
     <?php
     while ($i < $num_tables) {
@@ -241,10 +241,10 @@
         echo "\n";
         ?>
 <tr>
-    <td bgcolor="<?php echo $bgcolor; ?>" nowrap="nowrap">
-        <b><?php echo htmlspecialchars($tables[$i]); ?>&nbsp;</b>
-    </td>
-    <td align="right" bgcolor="<?php echo $bgcolor; ?>" nowrap="nowrap">
+    <td bgcolor="<?php echo  $bgcolor ?>" nowrap="nowrap">
+        <b><?php echo  htmlspecialchars($tables[$i]) ?>&nbsp;</b>
+    </td>
+    <td align="right" bgcolor="<?php echo  $bgcolor ?>" nowrap="nowrap">
         &nbsp;<?php PMA_countRecords($db, $tables[$i]); ?>
     </td>
 </tr>