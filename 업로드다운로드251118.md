# ë ˆê±°ì‹œ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ì‹œìŠ¤í…œ êµ¬í˜„ ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025ë…„ 11ì›” 18ì¼
**ëŒ€ìƒ ì œí’ˆ**: inserted (ì „ë‹¨ì§€), ncrflambeau (ì–‘ì‹ì§€)
**ì‘ì—… ì™„ë£Œ**: âœ… ë¡œì»¬ ê°œë°œ ì™„ë£Œ ë° ì‹¤ì„œë²„ ë°°í¬ ì™„ë£Œ

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ì—…ë¡œë“œ ê²½ë¡œ í˜•ì‹](#ì—…ë¡œë“œ-ê²½ë¡œ-í˜•ì‹)
3. [êµ¬í˜„ëœ íŒŒì¼ ëª©ë¡](#êµ¬í˜„ëœ-íŒŒì¼-ëª©ë¡)
4. [ìƒì„¸ êµ¬í˜„ ë‚´ìš©](#ìƒì„¸-êµ¬í˜„-ë‚´ìš©)
5. [ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°](#ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°)
6. [ê´€ë¦¬ì í˜ì´ì§€ ì—°ë™](#ê´€ë¦¬ì-í˜ì´ì§€-ì—°ë™)
7. [FTP ë°°í¬ ê³¼ì •](#ftp-ë°°í¬-ê³¼ì •)
8. [í…ŒìŠ¤íŠ¸ ë°©ë²•](#í…ŒìŠ¤íŠ¸-ë°©ë²•)
9. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ê°œìš”

### ëª©ì 
ê¸°ì¡´ ì£¼ë¬¸ ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©í•˜ë˜ ë ˆê±°ì‹œ ì—…ë¡œë“œ ê²½ë¡œ í˜•ì‹ì„ `inserted`(ì „ë‹¨ì§€)ì™€ `ncrflambeau`(ì–‘ì‹ì§€) ì œí’ˆì— ì ìš©í•˜ì—¬, ì¼ê´€ëœ íŒŒì¼ ê´€ë¦¬ ë° ê´€ë¦¬ì ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ì œê³µ

### ì£¼ìš” ê¸°ëŠ¥
- **ê³„ì¸µì  ë””ë ‰í† ë¦¬ êµ¬ì¡°**: ì œí’ˆëª…/ì—°ë„/ì›”ì¼/IP/íƒ€ì„ìŠ¤íƒ¬í”„
- **ì›ë³¸ íŒŒì¼ëª… ì¶”ì **: JSON ë§¤í•‘ìœ¼ë¡œ íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì¼ëª… â†” ì›ë³¸ íŒŒì¼ëª… ê´€ë¦¬
- **ê´€ë¦¬ì ë‹¤ìš´ë¡œë“œ**: ì›ë³¸ íŒŒì¼ëª…ìœ¼ë¡œ ë³µì›í•˜ì—¬ ì œê³µ
- **í†µí•© ì‹œìŠ¤í…œ**: ê¸°ì¡´ admin.php ë° download.phpì™€ ì™„ë²½ í˜¸í™˜

---

## ì—…ë¡œë“œ ê²½ë¡œ í˜•ì‹

### ê²½ë¡œ êµ¬ì¡°
```
ImgFolder/_MlangPrintAuto_{product}_index.php/{YYYY}/{MMDD}/{IP}/{timestamp}/
```

### ì‹¤ì œ ì˜ˆì‹œ

#### ì „ë‹¨ì§€ (inserted)
```
ImgFolder/_MlangPrintAuto_inserted_index.php/2025/1117/222.108.84.120/1763351602/
â”œâ”€â”€ 1763351602.pdf      â† ê³ ê°ì›ë³¸íŒŒì¼.pdf
â”œâ”€â”€ 1763351603.jpg      â† ë””ìì¸ì‹œì•ˆ.jpg
â””â”€â”€ 1763351604.ai       â† ìµœì¢…ë””ìì¸.ai
```

#### ì–‘ì‹ì§€ (ncrflambeau)
```
ImgFolder/_MlangPrintAuto_ncrflambeau_index.php/2025/1117/222.108.84.120/1763351800/
â”œâ”€â”€ 1763351800.pdf      â† ì–‘ì‹ê²¬ë³¸.pdf
â””â”€â”€ 1763351801.jpg      â† ì°¸ê³ ì´ë¯¸ì§€.jpg
```

### ê²½ë¡œ ìš”ì†Œ ì„¤ëª…
- **ImgFolder**: ë£¨íŠ¸ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ (ê³ ì •)
- **_MlangPrintAuto_{product}_index.php**: ì œí’ˆë³„ êµ¬ë¶„ì
- **YYYY**: 4ìë¦¬ ì—°ë„ (ì˜ˆ: 2025)
- **MMDD**: ì›”ì¼ 4ìë¦¬ (ì˜ˆ: 1117)
- **IP**: ì—…ë¡œë“œí•œ ì‚¬ìš©ì IP ì£¼ì†Œ
- **timestamp**: Unix íƒ€ì„ìŠ¤íƒ¬í”„ (time() í•¨ìˆ˜ ê²°ê³¼)

---

## êµ¬í˜„ëœ íŒŒì¼ ëª©ë¡

### 1. ê³µí†µ ì„¤ì • íŒŒì¼
#### `/includes/upload_config.php`
**ìƒˆë¡œ ì¶”ê°€ëœ í•¨ìˆ˜**:
```php
// ë ˆê±°ì‹œ ì—…ë¡œë“œ ê²½ë¡œ ìƒì„±
function generateLegacyUploadPath($product_type)

// ë ˆê±°ì‹œ ë””ë ‰í† ë¦¬ ìƒì„± ë° ê¶Œí•œ ì„¤ì •
function createLegacyUploadDirectory($physical_path)
```

**íŒŒì¼ í¬ê¸°**: 5,252 bytes

### 2. ì „ë‹¨ì§€ ì‹œìŠ¤í…œ
#### `/mlangprintauto/inserted/add_to_basket.php`
**ì£¼ìš” ë³€ê²½ì‚¬í•­**:
- SimpleUploadHandler ì œê±°
- ë ˆê±°ì‹œ ê²½ë¡œ ìƒì„± ë¡œì§ ì¶”ê°€
- íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ íŒŒì¼ëª… ì €ì¥
- INSERT ì¿¼ë¦¬ì— ImgFolder, ThingCate, original_filename í•„ë“œ ì¶”ê°€

**íŒŒì¼ í¬ê¸°**: 4,755 bytes

### 3. ì–‘ì‹ì§€ ì‹œìŠ¤í…œ
#### `/mlangprintauto/ncrflambeau/add_to_basket.php`
**ì£¼ìš” ë³€ê²½ì‚¬í•­**:
- UploadPathHelper ì œê±°
- ë ˆê±°ì‹œ ê²½ë¡œ ìƒì„± ë¡œì§ ì¶”ê°€
- INSERT ì¿¼ë¦¬ 15ê°œ â†’ 16ê°œ íŒŒë¼ë¯¸í„°ë¡œ í™•ì¥

**íŒŒì¼ í¬ê¸°**: 8,239 bytes

### 4. ê´€ë¦¬ì í˜ì´ì§€ (ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •)
#### `/admin/mlangprintauto/admin.php`
**ìˆ˜ì • ìœ„ì¹˜**:
- Lines 721-735: ImgFolder ê²½ë¡œ ê°ì§€ ë¡œì§ ê°œì„ 
- Lines 832-876: ë ˆê±°ì‹œ ê²½ë¡œ íŒŒì¼ í‘œì‹œ ë° ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±

#### `/admin/mlangprintauto/download.php`
**ê¸°ëŠ¥**:
- Lines 26-53: ì›ë³¸ íŒŒì¼ëª… ì¡°íšŒ (original_filename JSON)
- Line 133: ì›ë³¸ íŒŒì¼ëª…ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ ì œê³µ

---

## ìƒì„¸ êµ¬í˜„ ë‚´ìš©

### 1. ë ˆê±°ì‹œ ê²½ë¡œ ìƒì„± í•¨ìˆ˜

#### `generateLegacyUploadPath($product_type)`
```php
/**
 * ë ˆê±°ì‹œ í˜•ì‹ ì—…ë¡œë“œ ê²½ë¡œ ìƒì„±
 *
 * @param string $product_type ì œí’ˆ íƒ€ì… (inserted, ncrflambeau ë“±)
 * @return array ['img_folder' => ê²½ë¡œ, 'physical_path' => ì‹¤ì œ ê²½ë¡œ]
 */
function generateLegacyUploadPath($product_type) {
    $ip = $_SERVER['REMOTE_ADDR'] ?? '127.0.0.1';
    $timestamp = time();
    $year = date('Y');
    $month_day = date('md'); // MMDD í˜•ì‹

    // IPv6 localhost ì²˜ë¦¬
    if ($ip === '::1') {
        $ip = '127.0.0.1';
    }

    // ê²½ë¡œ êµ¬ì¡° ìƒì„±
    $folder_name = "_MlangPrintAuto_{$product_type}_index.php";
    $img_folder = "ImgFolder/{$folder_name}/{$year}/{$month_day}/{$ip}/{$timestamp}/";

    // ì‹¤ì œ íŒŒì¼ì‹œìŠ¤í…œ ê²½ë¡œ
    $physical_path = __DIR__ . '/../' . $img_folder;

    return [
        'img_folder' => $img_folder,
        'physical_path' => $physical_path
    ];
}
```

**íŠ¹ì§•**:
- ìë™ìœ¼ë¡œ ì—°ë„/ì›”ì¼ ê³„ì‚°
- IP ì£¼ì†Œ ì •ê·œí™” (IPv6 localhost ì²˜ë¦¬)
- ìƒëŒ€ ê²½ë¡œì™€ ì ˆëŒ€ ê²½ë¡œ ëª¨ë‘ ë°˜í™˜

---

### 2. ë””ë ‰í† ë¦¬ ìƒì„± í•¨ìˆ˜

#### `createLegacyUploadDirectory($physical_path)`
```php
/**
 * ë ˆê±°ì‹œ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±
 *
 * @param string $physical_path ì‹¤ì œ íŒŒì¼ì‹œìŠ¤í…œ ê²½ë¡œ
 * @return bool ì„±ê³µ ì—¬ë¶€
 */
function createLegacyUploadDirectory($physical_path) {
    if (!file_exists($physical_path)) {
        if (!mkdir($physical_path, 0755, true)) {
            error_log("Failed to create directory: {$physical_path}");
            return false;
        }
        chmod($physical_path, 0777); // ì›¹ì„œë²„ ì“°ê¸° ê¶Œí•œ
    }
    return true;
}
```

**íŠ¹ì§•**:
- ì¤‘ì²© ë””ë ‰í† ë¦¬ ìë™ ìƒì„± (`mkdir` 3ë²ˆì§¸ íŒŒë¼ë¯¸í„° `true`)
- ê¶Œí•œ 0777 ì„¤ì •ìœ¼ë¡œ ì›¹ì„œë²„ ì“°ê¸° ë³´ì¥
- ì‹¤íŒ¨ ì‹œ error_log ê¸°ë¡

---

### 3. íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ ë¡œì§

#### ì „ë‹¨ì§€ (inserted) ì˜ˆì‹œ
```php
// ë ˆê±°ì‹œ ê²½ë¡œ ìƒì„±
$upload_path_info = generateLegacyUploadPath('inserted');
$img_folder = $upload_path_info['img_folder'];
$physical_path = $upload_path_info['physical_path'];

// ë””ë ‰í† ë¦¬ ìƒì„±
if (!createLegacyUploadDirectory($physical_path)) {
    safe_json_response(false, null, 'ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„± ì‹¤íŒ¨');
}

// íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
$uploaded_files = [];
$original_filename_map = [];

if (!empty($_FILES['uploaded_files'])) {
    $files = $_FILES['uploaded_files'];
    $file_count = is_array($files['name']) ? count($files['name']) : 1;

    for ($i = 0; $i < $file_count; $i++) {
        $file_name = is_array($files['name']) ? $files['name'][$i] : $files['name'];
        $file_tmp = is_array($files['tmp_name']) ? $files['tmp_name'][$i] : $files['tmp_name'];
        $file_error = is_array($files['error']) ? $files['error'][$i] : $files['error'];

        if ($file_error === UPLOAD_ERR_OK) {
            // íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ íŒŒì¼ëª…
            $timestamp = time() + $i;
            $ext = pathinfo($file_name, PATHINFO_EXTENSION);
            $saved_name = $timestamp . '.' . $ext;
            $destination = $physical_path . $saved_name;

            if (move_uploaded_file($file_tmp, $destination)) {
                $uploaded_files[] = [
                    'original' => $file_name,
                    'saved' => $saved_name,
                    'path' => $img_folder . $saved_name
                ];
                $original_filename_map[$saved_name] = $file_name;
            }
        }
    }
}
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- `time() + $i`: ì—¬ëŸ¬ íŒŒì¼ ë™ì‹œ ì—…ë¡œë“œ ì‹œ íƒ€ì„ìŠ¤íƒ¬í”„ ì¤‘ë³µ ë°©ì§€
- `$original_filename_map`: íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì¼ëª… â†’ ì›ë³¸ íŒŒì¼ëª… ë§¤í•‘
- ë‹¨ì¼/ë‹¤ì¤‘ íŒŒì¼ ëª¨ë‘ ì²˜ë¦¬ ê°€ëŠ¥ (`is_array()` ì²´í¬)

---

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥

#### INSERT ì¿¼ë¦¬ (ì „ë‹¨ì§€)
```php
$original_filename_json = json_encode($original_filename_map, JSON_UNESCAPED_UNICODE);
$thing_cate = !empty($uploaded_files) ? $uploaded_files[0]['saved'] : '';

$sql = "INSERT INTO shop_temp (
    session_id, product_type, MY_type, PN_type, MY_Fsd, MY_amount,
    POtype, ordertype, st_price, st_price_vat, additional_options,
    additional_options_total, ImgFolder, ThingCate, original_filename
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";

mysqli_stmt_bind_param($stmt, "ssssssssiisisss",
    $session_id, $product_type, $MY_type, $PN_type, $MY_Fsd, $MY_amount,
    $POtype, $ordertype, $price, $vat_price, $additional_options_json,
    $additional_options_total, $img_folder, $thing_cate, $original_filename_json
);
```

#### INSERT ì¿¼ë¦¬ (ì–‘ì‹ì§€)
```php
$insert_query = "INSERT INTO shop_temp (
    session_id, product_type, MY_type, MY_Fsd, PN_type, MY_amount,
    ordertype, st_price, st_price_vat, premium_options, premium_options_total,
    work_memo, upload_method, ImgFolder, ThingCate, original_filename
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";

mysqli_stmt_bind_param($stmt, "sssssssisissssss",
    $session_id, $product_type, $MY_type, $MY_Fsd, $PN_type, $MY_amount,
    $ordertype, $price, $vat_price, $additional_options_json, $additional_total,
    $work_memo, $upload_method, $img_folder, $thing_cate, $original_filename_json
);
```

**íŒŒë¼ë¯¸í„° ìˆ˜ ì°¨ì´**:
- ì „ë‹¨ì§€: 15ê°œ (POtype í¬í•¨)
- ì–‘ì‹ì§€: 16ê°œ (work_memo, upload_method í¬í•¨)

---

## ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### shop_temp í…Œì´ë¸” ì£¼ìš” í•„ë“œ

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| `ImgFolder` | VARCHAR(255) | ì—…ë¡œë“œ ê²½ë¡œ | `ImgFolder/_MlangPrintAuto_inserted_index.php/2025/1117/222.108.84.120/1763351602/` |
| `ThingCate` | VARCHAR(255) | ëŒ€í‘œ íŒŒì¼ëª… (ì²« ë²ˆì§¸ íŒŒì¼) | `1763351602.pdf` |
| `original_filename` | TEXT | ì›ë³¸ íŒŒì¼ëª… ë§¤í•‘ (JSON) | `{"1763351602.pdf":"ê³ ê°ì›ë³¸.pdf","1763351603.jpg":"ì‹œì•ˆ.jpg"}` |

### mlangorder_printauto í…Œì´ë¸”
ì£¼ë¬¸ ì²˜ë¦¬ ì‹œ `shop_temp`ì—ì„œ `mlangorder_printauto`ë¡œ ë°ì´í„° ë³µì‚¬:
- `ImgFolder`: ê·¸ëŒ€ë¡œ ë³µì‚¬
- `ThingCate`: ëŒ€í‘œ íŒŒì¼ëª… ë³µì‚¬
- `original_filename`: JSON ë§¤í•‘ ë³µì‚¬

---

## ê´€ë¦¬ì í˜ì´ì§€ ì—°ë™

### 1. ImgFolder ê²½ë¡œ ê°ì§€ (admin.php:721-735)

```php
// âœ… FIX: mlangorder_printauto í…Œì´ë¸”ì—ì„œ ImgFolder ì •ë³´ ê°€ì ¸ì˜¤ê¸°
if (!empty($row['ImgFolder'])) {
    // ë ˆê±°ì‹œ í˜•ì‹ ê²½ë¡œ ì²˜ë¦¬: ImgFolder/_MlangPrintAuto_*_index.php/...
    if (strpos($row['ImgFolder'], 'ImgFolder/') === 0) {
        // ìƒˆë¡œìš´ ë ˆê±°ì‹œ ê²½ë¡œ í˜•ì‹: ImgFolderë¡œ ì‹œì‘í•˜ëŠ” ì „ì²´ ê²½ë¡œ
        $sticker_dirs[] = "../../" . $row['ImgFolder'];
    } elseif (strpos($row['ImgFolder'], '_MlangPrintAuto_') === 0) {
        // ImgFolder/ ì—†ì´ _MlangPrintAuto_ë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°
        $sticker_dirs[] = "../../ImgFolder/" . $row['ImgFolder'];
    } else {
        // ê¸°ì¡´ ë°©ì‹ (ìƒëŒ€ ê²½ë¡œ)
        $sticker_dirs[] = "../../" . $row['ImgFolder'];
    }
}
```

**ì§€ì›í•˜ëŠ” ê²½ë¡œ í˜•ì‹**:
1. `ImgFolder/_MlangPrintAuto_...` (í˜„ì¬ ì‚¬ìš©)
2. `_MlangPrintAuto_...` (ImgFolder/ ìƒëµ í˜•ì‹)
3. ê¸°íƒ€ ìƒëŒ€ ê²½ë¡œ (ê¸°ì¡´ ë°©ì‹)

---

### 2. íŒŒì¼ ëª©ë¡ í‘œì‹œ ë° ë‹¤ìš´ë¡œë“œ (admin.php:832-876)

```php
// ğŸ”§ ë ˆê±°ì‹œ ì—…ë¡œë“œ ê²½ë¡œ ì²´í¬
if (!empty($row['ImgFolder']) &&
    (strpos($row['ImgFolder'], 'ImgFolder/') === 0 ||
     strpos($row['ImgFolder'], '_MlangPrintAuto_') === 0)) {

    // ê²½ë¡œ ê²°ì •
    if (strpos($row['ImgFolder'], 'ImgFolder/') === 0) {
        $dir_path = "../../" . $row['ImgFolder'];
        $download_base_path = $row['ImgFolder'];
    } else {
        $dir_path = "../../ImgFolder/" . $row['ImgFolder'];
        $download_base_path = "ImgFolder/" . $row['ImgFolder'];
    }

    if (is_dir($dir_path)) {
        echo "<div style='margin-top: 10px; padding: 8px; background: #e8f5e9; border-left: 3px solid #4caf50;'>";
        echo "<strong>âœ… ë ˆê±°ì‹œ ê²½ë¡œ íŒŒì¼:</strong> " . htmlspecialchars($row['ImgFolder']) . "<br>";

        $dir_handle = opendir($dir_path);
        while ($tmp = readdir($dir_handle)) {
            if ($tmp != "." && $tmp != "..") {
                $download_path = urlencode($download_base_path);
                $file_size = filesize("$dir_path/$tmp");
                $file_size_mb = round($file_size / 1024 / 1024, 2);

                // ëŒ€í‘œ íŒŒì¼ ì•„ì´ì½˜
                $icon = ($tmp == $row['ThingCate']) ? "ğŸ“Œ" : "ğŸ“„";

                echo "$icon <a href='download.php?no=$no&downfile=" . urlencode($tmp) .
                     "&path=$download_path' class='file'>";
                echo htmlspecialchars($tmp) . "</a> ({$file_size_mb}MB)";

                if ($tmp == $row['ThingCate']) {
                    echo " <span style='color: #28a745; font-weight: bold;'>(ëŒ€í‘œ íŒŒì¼)</span>";
                }
                echo "<br>";
            }
        }
        closedir($dir_handle);
        echo "</div>";
    }
}
```

**í™”ë©´ í‘œì‹œ ì˜ˆì‹œ**:
```
âœ… ë ˆê±°ì‹œ ê²½ë¡œ íŒŒì¼: ImgFolder/_MlangPrintAuto_inserted_index.php/2025/1117/222.108.84.120/1763351602/
ğŸ“Œ 1763351602.pdf (2.5MB) (ëŒ€í‘œ íŒŒì¼)
ğŸ“„ 1763351603.jpg (1.2MB)
ğŸ“„ 1763351604.ai (5.8MB)
```

---

### 3. ì›ë³¸ íŒŒì¼ëª… ë³µì› ë‹¤ìš´ë¡œë“œ (download.php:26-53)

```php
// ğŸ†• ì›ë³¸ íŒŒì¼ëª… ì¡°íšŒ (ì£¼ë¬¸ë²ˆí˜¸ê°€ ìˆëŠ” ê²½ìš°)
$original_filename = null;
if (!empty($no) && $connect) {
    $query = "SELECT original_filename FROM mlangorder_printauto WHERE no = ?";
    $stmt = mysqli_prepare($connect, $query);

    if ($stmt) {
        mysqli_stmt_bind_param($stmt, 'i', $no);
        mysqli_stmt_execute($stmt);
        $result = mysqli_stmt_get_result($stmt);

        if ($row = mysqli_fetch_assoc($result)) {
            $original_filename_json = $row['original_filename'];

            if (!empty($original_filename_json)) {
                $filename_map = json_decode($original_filename_json, true);

                // $downfile(timestamp íŒŒì¼ëª…)ì— í•´ë‹¹í•˜ëŠ” ì›ë³¸ íŒŒì¼ëª… ì°¾ê¸°
                if (isset($filename_map[$downfile])) {
                    $original_filename = $filename_map[$downfile];
                    error_log("ì›ë³¸ íŒŒì¼ëª… ë°œê²¬: {$downfile} â†’ {$original_filename}");
                }
            }
        }
        mysqli_stmt_close($stmt);
    }
}

// ğŸ†• ë‹¤ìš´ë¡œë“œ íŒŒì¼ëª… ê²°ì •: ì›ë³¸ íŒŒì¼ëª…ì´ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ timestamp íŒŒì¼ëª… ì‚¬ìš©
$download_filename = !empty($original_filename) ? $original_filename : $downfile;
```

**ë™ì‘ ì›ë¦¬**:
1. ì£¼ë¬¸ë²ˆí˜¸ë¡œ `original_filename` JSON ì¡°íšŒ
2. JSON íŒŒì‹±í•˜ì—¬ íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì¼ëª…ì— ë§¤í•‘ëœ ì›ë³¸ íŒŒì¼ëª… ì°¾ê¸°
3. ì›ë³¸ íŒŒì¼ëª…ì´ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì¼ëª… ê·¸ëŒ€ë¡œ ì‚¬ìš©
4. HTTP í—¤ë”ì— ì›ë³¸ íŒŒì¼ëª… ì„¤ì •í•˜ì—¬ ë‹¤ìš´ë¡œë“œ

---

## FTP ë°°í¬ ê³¼ì •

### ì—…ë¡œë“œ ëª…ë ¹ì–´

```bash
# 1. upload_config.php ì—…ë¡œë“œ
curl -T /var/www/html/includes/upload_config.php \
     ftp://dsp1830.shop/includes/ \
     --user dsp1830:ds701018

# 2. inserted/add_to_basket.php ì—…ë¡œë“œ
curl -T /var/www/html/mlangprintauto/inserted/add_to_basket.php \
     ftp://dsp1830.shop/mlangprintauto/inserted/ \
     --user dsp1830:ds701018

# 3. ncrflambeau/add_to_basket.php ì—…ë¡œë“œ
curl -T /var/www/html/mlangprintauto/ncrflambeau/add_to_basket.php \
     ftp://dsp1830.shop/mlangprintauto/ncrflambeau/ \
     --user dsp1830:ds701018
```

### ì—…ë¡œë“œ ê²°ê³¼

| íŒŒì¼ | í¬ê¸° | ìƒíƒœ |
|------|------|------|
| includes/upload_config.php | 5,252 bytes | âœ… ì„±ê³µ |
| mlangprintauto/inserted/add_to_basket.php | 4,755 bytes | âœ… ì„±ê³µ |
| mlangprintauto/ncrflambeau/add_to_basket.php | 8,239 bytes | âœ… ì„±ê³µ |

---

## í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ì „ë‹¨ì§€ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸

#### í…ŒìŠ¤íŠ¸ URL
```
http://dsp1830.shop/mlangprintauto/inserted/index.php
```

#### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
1. ì œí’ˆ ì˜µì…˜ ì„ íƒ (ìš©ì§€, ì‚¬ì´ì¦ˆ, ìˆ˜ëŸ‰ ë“±)
2. íŒŒì¼ ì—…ë¡œë“œ (PDF, JPG ë“± ì—¬ëŸ¬ ê°œ)
3. ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° ë²„íŠ¼ í´ë¦­
4. ì„±ê³µ ë©”ì‹œì§€ í™•ì¸: `"ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. (íŒŒì¼ Nê°œ ì—…ë¡œë“œ ì™„ë£Œ)"`

#### ì˜ˆìƒ ê²°ê³¼
- íŒŒì¼ ì €ì¥ ìœ„ì¹˜: `ImgFolder/_MlangPrintAuto_inserted_index.php/2025/1118/[IP]/[timestamp]/`
- íŒŒì¼ëª…: `1731900000.pdf`, `1731900001.jpg` (íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜)
- ë°ì´í„°ë² ì´ìŠ¤ `shop_temp` í…Œì´ë¸”:
  - `ImgFolder`: ì „ì²´ ê²½ë¡œ ì €ì¥
  - `ThingCate`: `1731900000.pdf` (ì²« ë²ˆì§¸ íŒŒì¼)
  - `original_filename`: `{"1731900000.pdf":"ê³ ê°ì›ë³¸.pdf","1731900001.jpg":"ì‹œì•ˆ.jpg"}`

---

### 2. ì–‘ì‹ì§€ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸

#### í…ŒìŠ¤íŠ¸ URL
```
http://dsp1830.shop/mlangprintauto/ncrflambeau/index.php
```

#### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
1. ì–‘ì‹ì§€ ì˜µì…˜ ì„ íƒ
2. íŒŒì¼ ì—…ë¡œë“œ
3. ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
4. ì„±ê³µ ë©”ì‹œì§€ í™•ì¸

#### ì˜ˆìƒ ê²°ê³¼
- íŒŒì¼ ì €ì¥ ìœ„ì¹˜: `ImgFolder/_MlangPrintAuto_ncrflambeau_index.php/2025/1118/[IP]/[timestamp]/`
- ë™ì¼í•œ íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì¼ëª… ë° JSON ë§¤í•‘

---

### 3. ê´€ë¦¬ì ë‹¤ìš´ë¡œë“œ í…ŒìŠ¤íŠ¸

#### í…ŒìŠ¤íŠ¸ URL
```
http://dsp1830.shop/admin/mlangprintauto/admin.php?mode=OrderView&no=[ì£¼ë¬¸ë²ˆí˜¸]
```

#### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
1. ì£¼ë¬¸ ìƒì„¸ë³´ê¸° í˜ì´ì§€ ì ‘ì†
2. "âœ… ë ˆê±°ì‹œ ê²½ë¡œ íŒŒì¼" ì„¹ì…˜ í™•ì¸
3. íŒŒì¼ ëª©ë¡ í‘œì‹œ í™•ì¸:
   - ğŸ“Œ ì•„ì´ì½˜: ëŒ€í‘œ íŒŒì¼
   - ğŸ“„ ì•„ì´ì½˜: ì¶”ê°€ íŒŒì¼
   - íŒŒì¼ í¬ê¸° í‘œì‹œ
4. íŒŒì¼ í´ë¦­í•˜ì—¬ ë‹¤ìš´ë¡œë“œ
5. ë‹¤ìš´ë¡œë“œëœ íŒŒì¼ëª…ì´ ì›ë³¸ íŒŒì¼ëª…ì¸ì§€ í™•ì¸

#### ì˜ˆìƒ ê²°ê³¼
- í™”ë©´ì— íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì¼ëª… í‘œì‹œ: `1731900000.pdf`
- ë‹¤ìš´ë¡œë“œ ì‹œ ì›ë³¸ íŒŒì¼ëª…ìœ¼ë¡œ ì €ì¥: `ê³ ê°ì›ë³¸.pdf`

---

### 4. ë””ë ‰í† ë¦¬ êµ¬ì¡° í™•ì¸

#### SSH/FTP ì ‘ì† í›„ í™•ì¸
```bash
cd /var/www/html/ImgFolder/
ls -la _MlangPrintAuto_inserted_index.php/2025/1118/

# ì˜ˆìƒ ì¶œë ¥:
# drwxrwxrwx 3 www-data www-data 4096 Nov 18 10:30 222.108.84.120
# cd 222.108.84.120/
# ls -la
# drwxrwxrwx 2 www-data www-data 4096 Nov 18 10:30 1731900000
# cd 1731900000/
# ls -la
# -rw-r--r-- 1 www-data www-data 524288 Nov 18 10:30 1731900000.pdf
# -rw-r--r-- 1 www-data www-data 102400 Nov 18 10:30 1731900001.jpg
```

---

## ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„± ì‹¤íŒ¨

**ì¦ìƒ**:
```
ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„± ì‹¤íŒ¨
```

**ì›ì¸**:
- ìƒìœ„ ë””ë ‰í† ë¦¬ ê¶Œí•œ ë¶€ì¡±
- ë””ìŠ¤í¬ ê³µê°„ ë¶€ì¡±

**í•´ê²° ë°©ë²•**:
```bash
# ê¶Œí•œ í™•ì¸
ls -la /var/www/html/ImgFolder/

# ê¶Œí•œ ìˆ˜ì •
sudo chmod 777 /var/www/html/ImgFolder/
sudo chown -R www-data:www-data /var/www/html/ImgFolder/
```

---

### ë¬¸ì œ 2: íŒŒì¼ì´ ê´€ë¦¬ì í˜ì´ì§€ì— í‘œì‹œë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**:
- ì—…ë¡œë“œëŠ” ì„±ê³µí–ˆìœ¼ë‚˜ ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ íŒŒì¼ ëª©ë¡ì´ ë³´ì´ì§€ ì•ŠìŒ

**ì›ì¸**:
- `admin.php`ê°€ êµ¬ë²„ì „ (ImgFolder ê²½ë¡œ ì²˜ë¦¬ ë¡œì§ ì—†ìŒ)
- ë°ì´í„°ë² ì´ìŠ¤ì— `ImgFolder` ê°’ì´ ì €ì¥ë˜ì§€ ì•ŠìŒ

**í•´ê²° ë°©ë²•**:
```bash
# 1. admin.php ìµœì‹  ë²„ì „ í™•ì¸
grep "ë ˆê±°ì‹œ ê²½ë¡œ íŒŒì¼" /var/www/html/admin/mlangprintauto/admin.php

# 2. ìˆìœ¼ë©´ OK, ì—†ìœ¼ë©´ admin.php ì¬ë°°í¬ í•„ìš”

# 3. ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸
mysql -u dsp1830 -p dsp1830
SELECT ImgFolder, ThingCate, original_filename
FROM mlangorder_printauto
WHERE no = [ì£¼ë¬¸ë²ˆí˜¸];
```

---

### ë¬¸ì œ 3: ë‹¤ìš´ë¡œë“œ ì‹œ ì›ë³¸ íŒŒì¼ëª…ì´ ì•„ë‹Œ íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì¼ëª…ìœ¼ë¡œ ì €ì¥ë¨

**ì¦ìƒ**:
- ë‹¤ìš´ë¡œë“œ í´ë¦­ ì‹œ `1731900000.pdf` ê°™ì€ íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì¼ëª…ìœ¼ë¡œ ì €ì¥

**ì›ì¸**:
- `download.php`ê°€ êµ¬ë²„ì „ (ì›ë³¸ íŒŒì¼ëª… ë³µì› ë¡œì§ ì—†ìŒ)
- ë°ì´í„°ë² ì´ìŠ¤ `original_filename` í•„ë“œê°€ NULL

**í•´ê²° ë°©ë²•**:
```bash
# 1. download.php ìµœì‹  ë²„ì „ í™•ì¸
grep "ì›ë³¸ íŒŒì¼ëª… ì¡°íšŒ" /var/www/html/admin/mlangprintauto/download.php

# 2. ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸
SELECT original_filename
FROM mlangorder_printauto
WHERE no = [ì£¼ë¬¸ë²ˆí˜¸];

# 3. JSON í˜•ì‹ í™•ì¸
# ì˜ˆìƒ: {"1731900000.pdf":"ê³ ê°ì›ë³¸.pdf"}
# ì‹¤ì œ: NULL ë˜ëŠ” ë¹ˆ ë¬¸ìì—´ì´ë©´ ë¬¸ì œ
```

---

### ë¬¸ì œ 4: INSERT ì¿¼ë¦¬ ì‹¤íŒ¨ - íŒŒë¼ë¯¸í„° ìˆ˜ ë¶ˆì¼ì¹˜

**ì¦ìƒ**:
```
ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ ì‹¤íŒ¨: Number of elements in type definition string doesn't match number of bind variables
```

**ì›ì¸**:
- `bind_param` íƒ€ì… ë¬¸ìì—´ê³¼ ì‹¤ì œ ë³€ìˆ˜ ê°œìˆ˜ ë¶ˆì¼ì¹˜
- ì „ë‹¨ì§€: 15ê°œ íŒŒë¼ë¯¸í„°
- ì–‘ì‹ì§€: 16ê°œ íŒŒë¼ë¯¸í„°

**í•´ê²° ë°©ë²•**:
```php
// ì „ë‹¨ì§€ í™•ì¸
mysqli_stmt_bind_param($stmt, "ssssssssiisisss", ...);
// "ssssssssiisisss" = 15ê¸€ì â†’ 15ê°œ ë³€ìˆ˜ í•„ìš”

// ì–‘ì‹ì§€ í™•ì¸
mysqli_stmt_bind_param($stmt, "sssssssisissssss", ...);
// "sssssssisissssss" = 16ê¸€ì â†’ 16ê°œ ë³€ìˆ˜ í•„ìš”

// íƒ€ì… ë¬¸ìì—´:
// s = string
// i = integer
```

---

### ë¬¸ì œ 5: íŒŒì¼ ì—…ë¡œë“œ í›„ ë¹ˆ ë°°ì—´ ë°˜í™˜

**ì¦ìƒ**:
```json
{
  "success": true,
  "data": {
    "basket_id": 123,
    "uploaded_files_count": 0,
    "upload_path": "ImgFolder/..."
  }
}
```

**ì›ì¸**:
- `$_FILES['uploaded_files']` ë¹„ì–´ìˆìŒ
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `name="uploaded_files"` ì†ì„± ëˆ„ë½
- PHP `upload_max_filesize` ì„¤ì • ì´ˆê³¼

**í•´ê²° ë°©ë²•**:
```html
<!-- í”„ë¡ íŠ¸ì—”ë“œ HTML í™•ì¸ -->
<input type="file" name="uploaded_files[]" multiple>
<!-- âœ… name ì†ì„±ì´ "uploaded_files[]"ì¸ì§€ í™•ì¸ -->

<!-- PHP ì„¤ì • í™•ì¸ -->
<?php
echo "upload_max_filesize: " . ini_get('upload_max_filesize') . "<br>";
echo "post_max_size: " . ini_get('post_max_size');
?>
```

---

## ì¶”ê°€ ê°œì„  ì‚¬í•­ (ì„ íƒ)

### 1. íŒŒì¼ íƒ€ì… ê²€ì¦ ê°•í™”
```php
$allowed_extensions = ['pdf', 'jpg', 'jpeg', 'png', 'gif', 'ai', 'psd'];
$file_ext = strtolower(pathinfo($file_name, PATHINFO_EXTENSION));

if (!in_array($file_ext, $allowed_extensions)) {
    safe_json_response(false, null, 'í—ˆìš©ë˜ì§€ ì•Šì€ íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤.');
}
```

### 2. íŒŒì¼ í¬ê¸° ì œí•œ
```php
$max_file_size = 50 * 1024 * 1024; // 50MB

if ($_FILES['uploaded_files']['size'][$i] > $max_file_size) {
    safe_json_response(false, null, 'íŒŒì¼ í¬ê¸°ëŠ” 50MBë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
}
```

### 3. ì´ë¯¸ì§€ íŒŒì¼ ê²€ì¦ (ìœ„ì¡° ë°©ì§€)
```php
if (in_array($file_ext, ['jpg', 'jpeg', 'png', 'gif'])) {
    $image_info = getimagesize($file_tmp);
    if ($image_info === false) {
        safe_json_response(false, null, 'ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë¯¸ì§€ íŒŒì¼ì…ë‹ˆë‹¤.');
    }
}
```

### 4. ë¡œê·¸ ê¸°ë¡ ê°•í™”
```php
error_log(sprintf(
    "[UPLOAD] Product: %s, Session: %s, IP: %s, Files: %d, Total Size: %.2fMB",
    $product_type,
    $session_id,
    $_SERVER['REMOTE_ADDR'],
    count($uploaded_files),
    $total_size / 1024 / 1024
));
```

---

## ì°¸ê³  ìë£Œ

### ê´€ë ¨ ë¬¸ì„œ
- [CLAUDE.md](CLAUDE.md) - ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡° ë¬¸ì„œ
- [FTP_SERVER_CLEANUP_GUIDE.md](FTP_SERVER_CLEANUP_GUIDE.md) - FTP ì„œë²„ ì •ë¦¬ ê°€ì´ë“œ

### PHP í•¨ìˆ˜ ë ˆí¼ëŸ°ìŠ¤
- [`move_uploaded_file()`](https://www.php.net/manual/en/function.move-uploaded-file.php)
- [`json_encode()`](https://www.php.net/manual/en/function.json-encode.php)
- [`mysqli_stmt_bind_param()`](https://www.php.net/manual/en/mysqli-stmt.bind-param.php)

### ë””ë²„ê¹… íŒ
```php
// ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ í™•ì¸
var_dump($physical_path);
var_dump(file_exists($physical_path));
var_dump(is_writable($physical_path));

// íŒŒì¼ ì—…ë¡œë“œ ì—ëŸ¬ í™•ì¸
var_dump($_FILES['uploaded_files']['error']);

// JSON ì¸ì½”ë”© í™•ì¸
var_dump($original_filename_map);
var_dump($original_filename_json);
```

---

## ì‘ì—… ì´ë ¥

| ë‚ ì§œ | ì‘ì—… ë‚´ìš© | ë‹´ë‹¹ì |
|------|----------|--------|
| 2025-11-18 | ë ˆê±°ì‹œ ì—…ë¡œë“œ ì‹œìŠ¤í…œ ì„¤ê³„ ë° êµ¬í˜„ | Claude |
| 2025-11-18 | ì „ë‹¨ì§€(inserted) ì‹œìŠ¤í…œ ì ìš© | Claude |
| 2025-11-18 | ì–‘ì‹ì§€(ncrflambeau) ì‹œìŠ¤í…œ ì ìš© | Claude |
| 2025-11-18 | ê´€ë¦¬ì í˜ì´ì§€ ì—°ë™ ë° ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ êµ¬í˜„ | Claude |
| 2025-11-18 | ì‹¤ì„œë²„ FTP ë°°í¬ ì™„ë£Œ | Claude |
| 2025-11-19 | **FormData ë²„ê·¸ ìˆ˜ì • (4ê°œ ì œí’ˆ)** | Claude |
| 2025-11-19 | envelope (ë´‰íˆ¬) FormData ìˆ˜ì • ë° ë°°í¬ | Claude |
| 2025-11-19 | littleprint (ì†ŒëŸ‰ì¸ì‡„) FormData ìˆ˜ì • ë° ë°°í¬ | Claude |
| 2025-11-19 | cadarok (ì¹´ë‹¤ë¡) FormData ìˆ˜ì • ë° ë°°í¬ | Claude |
| 2025-11-19 | ncrflambeau (ì–‘ì‹ì§€) FormData ìˆ˜ì • ë° ë°°í¬ | Claude |

---

## ğŸ”§ **2025-11-19 ì¶”ê°€: FormData ë°°ì—´ ë²„ê·¸ ìˆ˜ì •**

### ğŸ“Š **ë¬¸ì œ ë°œê²¬**

**ë²„ê·¸ ë‚´ìš©**: ì—¬ëŸ¬ íŒŒì¼ ì—…ë¡œë“œ ì‹œ 1ê°œë§Œ ì„œë²„ì— ì „ì†¡ë˜ëŠ” ë¬¸ì œ

**ì›ì¸**: JavaScript FormDataì˜ ì˜ëª»ëœ ë°°ì—´ í‘œê¸°ë²•
```javascript
// âŒ ì˜ëª»ëœ ë°©ì‹ - PHPê°€ ë°°ì—´ë¡œ ì¸ì‹í•˜ì§€ ëª»í•¨
formData.append("uploaded_files[" + index + "]", file);

// âœ… ì˜¬ë°”ë¥¸ ë°©ì‹ - PHPê°€ ìë™ìœ¼ë¡œ ë°°ì—´ë¡œ ì¸ì‹
formData.append("uploaded_files[]", file);
```

### ğŸ“‹ **ìˆ˜ì •ëœ ì œí’ˆ ëª©ë¡**

| ì œí’ˆëª… | íŒŒì¼ ê²½ë¡œ | ìˆ˜ì • ë¼ì¸ | ì—…ë¡œë“œ ìƒíƒœ |
|--------|----------|----------|-----------|
| **envelope** (ë´‰íˆ¬) | `/mlangprintauto/envelope/index.php` | Line 514 | âœ… ì™„ë£Œ |
| **littleprint** (ì†ŒëŸ‰ì¸ì‡„) | `/mlangprintauto/littleprint/index.php` | Line 403 | âœ… ì™„ë£Œ |
| **cadarok** (ì¹´ë‹¤ë¡) | `/mlangprintauto/cadarok/index.php` | Line 511 | âœ… ì™„ë£Œ |
| **ncrflambeau** (ì–‘ì‹ì§€) | `/mlangprintauto/ncrflambeau/index.php` | Line 345 | âœ… ì™„ë£Œ |

### âœ… **ì •ìƒ ì‘ë™ ì œí’ˆ** (ìˆ˜ì • ì—†ì´ ì´ë¯¸ ì •ìƒ)

| ì œí’ˆëª… | íŒŒì¼ ê²½ë¡œ | ìƒíƒœ |
|--------|----------|------|
| **inserted** (ì „ë‹¨ì§€) | `/mlangprintauto/inserted/index.php` | âœ… ì •ìƒ (2025-11-18 ìˆ˜ì •ë¨) |
| **namecard** (ëª…í•¨) | `/mlangprintauto/namecard/index.php` | âœ… ì •ìƒ (ì›ë˜ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„ë¨) |

### ğŸ” **ê²€ì¦ ë°©ë²•**

#### FTPë¡œ í™•ì¸
```bash
curl -s --ftp-pasv ftp://dsp1830:ds701018@dsp1830.shop/www/mlangprintauto/[product]/index.php \
  | grep 'formData.append.*uploaded_files'
```

**ì˜ˆìƒ ê²°ê³¼**:
```javascript
formData.append("uploaded_files[]", file);  // âœ… ì •ìƒ
```

#### ì›¹ì—ì„œ í…ŒìŠ¤íŠ¸
1. ê° ì œí’ˆ í˜ì´ì§€ ì ‘ì†
2. ì˜µì…˜ ì„ íƒ í›„ **ì—¬ëŸ¬ ê°œ íŒŒì¼** ì—…ë¡œë“œ (2-3ê°œ)
3. ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
4. ì„±ê³µ ë©”ì‹œì§€ì—ì„œ ì—…ë¡œë“œ íŒŒì¼ ê°œìˆ˜ í™•ì¸: `(íŒŒì¼ Nê°œ ì—…ë¡œë“œ ì™„ë£Œ)`

### ğŸ“Š **ì˜í–¥ ë¶„ì„**

**ì´ì „ (ë²„ê·¸ ìƒíƒœ)**:
- ì—¬ëŸ¬ íŒŒì¼ ì—…ë¡œë“œ ì‹œë„ â†’ 1ê°œë§Œ ì €ì¥ë¨
- `$_FILES['uploaded_files']` ë°°ì—´ êµ¬ì¡° ë¬¸ì œ
- ê³ ê°ì´ ì—¬ëŸ¬ íŒŒì¼ì„ ì˜¬ë ¸ë‹¤ê³  ìƒê°í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” 1ê°œë§Œ ì „ì†¡

**ìˆ˜ì • í›„**:
- ì—¬ëŸ¬ íŒŒì¼ ì—…ë¡œë“œ â†’ ëª¨ë“  íŒŒì¼ ì •ìƒ ì €ì¥
- PHPê°€ ìë™ìœ¼ë¡œ ë°°ì—´ ì¸ì‹
- ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° ì„±ê³µ ë©”ì‹œì§€ì— ì •í™•í•œ íŒŒì¼ ê°œìˆ˜ í‘œì‹œ

### ğŸš€ **ë°°í¬ ìƒíƒœ**

**ë¡œì»¬ í™˜ê²½** (WSL2 localhost):
- âœ… 4ê°œ íŒŒì¼ ëª¨ë‘ ìˆ˜ì • ì™„ë£Œ
- âœ… ë¡œì»¬ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

**ì›¹ ì„œë²„** (dsp1830.shop):
- âœ… FTP ì—…ë¡œë“œ ì™„ë£Œ (2025-11-19 16:20)
- âš ï¸ HTTP ìºì‹œë¡œ ì¸í•´ 5-10ë¶„ í›„ ë°˜ì˜ ì˜ˆìƒ
- âœ… FTPë¡œ ì§ì ‘ í™•ì¸ ì‹œ ìˆ˜ì • ì‚¬í•­ ë°˜ì˜ í™•ì¸

### ğŸ”„ **ì¶”ê°€ ì‘ì—… í•„ìš” ì‚¬í•­**

#### ë¯¸í™•ì¸ ì œí’ˆ
- **leaflet** (ì „ë‹¨ì§€2): FTP ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨ë¡œ ë¯¸í™•ì¸
- **sticker** (ìŠ¤í‹°ì»¤): í™•ì¸ í•„ìš”
- **poster**: íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ ì—†ìŒ (í™•ì¸ë¨)

---

## ë¼ì´ì„ ìŠ¤ ë° ì €ì‘ê¶Œ

**Copyright Â© 2025 Duson Planning Print (ë‘ì†ê¸°íšì¸ì‡„)**
All rights reserved.

ì´ ë¬¸ì„œëŠ” ë‚´ë¶€ ê°œë°œ ì°¸ê³ ìš©ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

ì™„ë£Œ! ì´ì œ í…ŒìŠ¤íŠ¸í•´ì£¼ì„¸ìš”:
http://dsp1830.shop/mlangprintauto/inserted/index.php ì ‘ì†
ì˜µì…˜ ì„ íƒ
íŒŒì¼ ì—…ë¡œë“œ (PDF, JPG ë“±)
"ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°" í´ë¦­
ìˆ˜ì • ë‚´ìš©:
// âŒ ì´ì „ (ì˜ëª»ëœ ë°©ì‹)
formData.append("uploaded_files[" + index + "]", file);

// âœ… ìˆ˜ì • (ì˜¬ë°”ë¥¸ ë°©ì‹)  
formData.append("uploaded_files[]", file);
ë³€ê²½ ì´ìœ :
uploaded_files[0], uploaded_files[1] ë°©ì‹ì€ PHPì—ì„œ ê°œë³„ í‚¤ë¡œ ì¸ì‹ë¨
uploaded_files[] ë°©ì‹ì€ PHPê°€ ìë™ìœ¼ë¡œ ë°°ì—´ë¡œ ì¸ì‹í•¨
í…ŒìŠ¤íŠ¸ í¼ì—ì„œ í™•ì¸í•œ ê²ƒì²˜ëŸ¼ uploaded_files[]ê°€ ì •ìƒ ì‘ë™í•¨
ì´ì œ íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ì—…ë¡œë“œë  ê²ƒì…ë‹ˆë‹¤! ê²°ê³¼ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.
/ ê°€ ë” ë“¤ì–´ê°€ì•¼í•˜ë‚˜ìš”?
í…ŒìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš© - 2025-11-18 15:40:52
ì™„ë²½í•©ë‹ˆë‹¤! ğŸ‰ íŒŒì¼ ì—…ë¡œë“œê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤! í™•ì¸ëœ ë‚´ìš©:
íŒŒì¼ëª…: í…ŒìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš©
ì—…ë¡œë“œ ì‹œê°„: 2025-11-18 15:40:52
ì´ì œ ì „ë‹¨ì§€(inserted) ì‹œìŠ¤í…œì˜ íŒŒì¼ ì—…ë¡œë“œê°€ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!
ë‹¤ìŒ ë‹¨ê³„: ì–‘ì‹ì§€(ncrflambeau)ë„ ë™ì¼í•˜ê²Œ ìˆ˜ì •
ì–‘ì‹ì§€ë„ ê°™ì€ ë¬¸ì œê°€ ìˆì„ ê²ƒì´ë¯€ë¡œ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤:
Grep "formData\.append\("uploaded_files\[" (in /var/www/html/mlangprintauto/ncrflambeau, type: js)
Session limit reached âˆ™ resets 7pm
