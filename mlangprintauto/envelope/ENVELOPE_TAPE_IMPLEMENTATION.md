# 📋 봉투 양면테이프 옵션 구현 완료 가이드

## 📊 구현 개요
**목표**: 봉투 페이지에 수량 연동 양면테이프 옵션 추가
**완성일**: 2025-01-17
**가격 구조**: 500매: 25,000원, 1000매: 40,000원, 1000매 이상: 매당 40원

---

## 🎯 구현된 파일들

### 1. 메인 페이지
- **📄 index_01.php** (테스트용)
  - 기존 index.php 기반으로 양면테이프 옵션 추가
  - 실시간 가격 계산 및 수량 연동
  - 체크박스 → 드롭다운 → 가격 표시 흐름

### 2. JavaScript 계산 로직
- **📄 js/envelope_tape.js**
  - 양면테이프 가격 계산 함수
  - 수량 변경 시 자동 업데이트
  - 총액에 양면테이프 가격 포함
  - 가격 상세 내역 업데이트

### 3. 백엔드 처리
- **📄 add_to_basket_tape.php**
  - 양면테이프 데이터 처리
  - shop_temp 테이블에 저장
  - 제품명에 양면테이프 정보 포함

### 4. 데이터베이스 스키마
- **📄 sql/envelope_tape_schema.sql**
  - shop_temp 테이블에 3개 필드 추가
  - mlangorder_printauto 테이블에 3개 필드 추가

---

## 🔧 구현 세부사항

### 양면테이프 가격 로직
```javascript
// 가격 계산 함수
function calculateTapePrice() {
    const mainQuantity = parseInt(document.getElementById('MY_amount').value) || 0;
    let tapePrice = 0;

    if (mainQuantity <= 500) {
        tapePrice = 25000; // 고정 25,000원
    } else if (mainQuantity <= 1000) {
        tapePrice = 40000; // 고정 40,000원
    } else {
        tapePrice = mainQuantity * 40; // 매당 40원
    }

    return tapePrice;
}
```

### 데이터베이스 필드
| 필드명 | 타입 | 기본값 | 설명 |
|--------|------|--------|------|
| `tape_enabled` | TINYINT(1) | 0 | 양면테이프 활성화 여부 |
| `tape_quantity` | VARCHAR(20) | NULL | 양면테이프 수량 |
| `tape_price` | INT | 0 | 양면테이프 가격 |

### 화면 구성
1. **체크박스**: "🔧 양면테이프 추가"
2. **가격 표시**: "(+가격원)" 실시간 업데이트
3. **드롭다운**: 수량에 따른 옵션 동적 생성
4. **가격 정보**: 계산 근거 표시

---

## 🚀 테스트 방법

### 1. 데이터베이스 준비
```sql
-- phpMyAdmin에서 실행
source C:\xampp\htdocs\mlangprintauto\envelope\sql\envelope_tape_schema.sql;
```

### 2. 페이지 접속
```
http://localhost/mlangprintauto/envelope/index_01.php
```

### 3. 테스트 시나리오

#### 시나리오 A: 500매 이하 (25,000원 고정)
1. 구분, 종류, 색상, 편집비 선택
2. 수량: 500매 선택
3. 양면테이프 체크박스 선택
4. **예상 결과**: "(+25,000원)" 표시

#### 시나리오 B: 1000매 (40,000원 고정)
1. 수량: 1000매 선택
2. 양면테이프 체크박스 선택
3. **예상 결과**: "(+40,000원)" 표시

#### 시나리오 C: 1000매 초과 (매당 40원)
1. 수량: 2000매 선택
2. 양면테이프 체크박스 선택
3. **예상 결과**: "(+80,000원)" 표시 (2000 × 40원)

#### 시나리오 D: 장바구니 연동
1. 모든 옵션 선택 (양면테이프 포함)
2. "파일 업로드 및 주문하기" 버튼 클릭
3. 장바구니에 양면테이프 정보 포함 확인

---

## 📊 검증 포인트

### 1. 가격 계산 정확성
- ✅ 500매: 25,000원
- ✅ 1000매: 40,000원
- ✅ 2000매: 80,000원 (2000 × 40)
- ✅ 5000매: 200,000원 (5000 × 40)

### 2. UI/UX 검증
- ✅ 체크박스 클릭 시 드롭다운 표시
- ✅ 수량 변경 시 자동 재계산
- ✅ 가격 정보 실시간 업데이트
- ✅ 총액에 양면테이프 가격 포함

### 3. 데이터 연동 검증
- ✅ shop_temp 테이블에 데이터 저장
- ✅ 제품명에 양면테이프 정보 포함
- ✅ 총 가격에 양면테이프 가격 합산

### 4. 오류 처리 검증
- ✅ 필수 필드 누락 시 에러 메시지
- ✅ 잘못된 수량 입력 시 처리
- ✅ 데이터베이스 오류 시 안전한 처리

---

## 🔄 향후 확장 방안

### 1. 다른 제품 적용
이 양면테이프 시스템을 다른 제품에도 적용 가능:
- 명함 → 양면테이프 옵션
- 전단지 → 다양한 테이프 옵션
- 스티커 → 특수 테이프 옵션

### 2. 옵션 확장
- 테이프 종류 선택 (강력, 일반, 특수)
- 테이프 색상 옵션
- 수량별 할인 적용

### 3. 관리자 기능
- 양면테이프 가격 관리 페이지
- 주문 내역에서 양면테이프 정보 표시
- 통계 및 분석 기능

---

## 📝 주요 파일 경로

```
C:\xampp\htdocs\mlangprintauto\envelope\
├── index_01.php                    # 메인 테스트 페이지
├── js\envelope_tape.js              # 양면테이프 계산 JS
├── add_to_basket_tape.php           # 장바구니 처리 (양면테이프 지원)
├── sql\envelope_tape_schema.sql     # 데이터베이스 스키마
└── ENVELOPE_TAPE_IMPLEMENTATION.md  # 이 문서
```

---

## 🎉 구현 완료 체크리스트

- ✅ **설계 완료**: 가격 구조 및 데이터 흐름 설계
- ✅ **UI 구현**: 체크박스, 드롭다운, 가격 표시
- ✅ **계산 로직**: JavaScript 실시간 계산
- ✅ **백엔드 처리**: PHP 장바구니 연동
- ✅ **데이터베이스**: 스키마 업데이트
- ✅ **문서화**: 구현 가이드 작성

## 🔥 테스트 실행 준비 완료!

이제 `index_01.php`로 접속하여 양면테이프 옵션을 테스트해보세요.
정상 작동이 확인되면 기존 `index.php`에 적용할 수 있습니다.

---
**📅 작업 완료일**: 2025-01-17
**🔗 테스트 URL**: http://localhost/mlangprintauto/envelope/index_01.php
**💡 핵심 키워드**: 수량 연동, 동적 가격 계산, 양면테이프 옵션