# Phase 8: E2E 테스트 체크리스트

**작성일**: 2026-01-06
**목적**: 4개 페이지 표시 항목 통일 검증
**대상**: 10개 품목 전체

---

## 테스트 환경 준비

- [ ] 로컬 서버 실행: `http://localhost/`
- [ ] 데이터베이스 초기화 (선택사항)
- [ ] 브라우저 개발자 도구 오픈 (F12)
- [ ] 세션 정리 (장바구니 비우기)

---

## 📋 전체 테스트 플로우 (모든 품목 공통)

각 품목마다 아래 4단계를 순서대로 진행합니다.

### Step 1: 제품 페이지 → 장바구니 추가
1. 해당 품목 페이지 접속
2. 옵션 선택 (종류, 재질, 규격 등)
3. 수량 입력
4. "장바구니 담기" 클릭
5. 성공 메시지 확인

### Step 2: 장바구니 페이지 확인 (`/mlangprintauto/shop/cart.php`)
**검증 항목**:
- [ ] **컬럼 헤더**: `품목 | 규격/옵션 | 수량 | 단위 | 공급가액 | 관리`
- [ ] **품목**: 제품명 정확한가?
- [ ] **규격/옵션**: 선택한 옵션 표시되는가?
- [ ] **수량**: Phase 3 `quantity_display` 사용하는가?
- [ ] **단위**: `quantity_unit` 표시되는가?
- [ ] **공급가액**: `price_supply` 표시되는가? (디자인비+인쇄비 합산)

### Step 3: 주문 진행 → 주문완료 페이지 (`/mlangorder_printauto/OrderComplete_universal.php`)
1. 장바구니에서 "주문하기" 클릭
2. 주문자 정보 입력
3. 주문 제출
4. 주문완료 페이지 확인

**검증 항목**:
- [ ] **컬럼 헤더**: `주문번호 | 품목 | 규격/옵션 | 수량 | 공급가액 | 상태`
- [ ] **주문번호**: 표시되는가?
- [ ] **품목**: "품목" 용어 사용하는가? (~~상품명~~ 아님)
- [ ] **수량**: 단위가 **포함된 형태**로 표시되는가? (예: "1연", "500매")
- [ ] **공급가액**: "공급가액" 용어 사용하는가? (~~금액~~ 아님)
- [ ] **공급가액**: 금액이 정확한가?

### Step 4: 관리자 페이지 확인 (`/admin/MlangOrder_PrintAuto/OnlineOrder.php`)
**검증 항목**:
- [ ] **컬럼 헤더**: `NO | 품목 | 규격/옵션 | 수량 | 단위 | 공급가액`
- [ ] **"인쇄비" 컬럼이 **삭제**되었는가?** (중요!)
- [ ] **공급가액**: 장바구니/주문완료와 동일한 금액인가?

---

## 🔢 10개 품목별 개별 테스트

### ✅ 1. 명함 (namecard)
**URL**: `/mlangprintauto/namecard/index.php`

**특수 규칙**: 없음 (표준 수량 표시)

**테스트 케이스**:
- [ ] 종류: 일반명함
- [ ] 재질: 스노우지 250g
- [ ] 규격: 90mm × 50mm
- [ ] 수량: 500매
- [ ] **예상 장바구니 표시**: `수량: 500 | 단위: 매`
- [ ] **예상 주문완료 표시**: `수량: 500매`
- [ ] **예상 관리자 표시**: `수량: 500 | 단위: 매`

---

### ✅ 2. 전단지 (inserted)
**URL**: `/mlangprintauto/inserted/index.php`

**특수 규칙**: "X연 (Y매)" 형식 표시

**테스트 케이스 A - 정수 연**:
- [ ] 종류: 일반전단
- [ ] 재질: 모조지 80g
- [ ] 규격: A4
- [ ] 수량: 1연 (4,000매)
- [ ] **예상 장바구니 표시**: `수량: 1 | 단위: 연 (4,000매)`
- [ ] **예상 주문완료 표시**: `수량: 1연 (4,000매)`
- [ ] **예상 관리자 표시**: `수량: 1 | 단위: 연 (4,000매)`

**테스트 케이스 B - 소수점 연**:
- [ ] 수량: 0.5연 (2,000매)
- [ ] **예상 장바구니 표시**: `수량: 0.5 | 단위: 연 (2,000매)`
- [ ] **예상 주문완료 표시**: `수량: 0.5연 (2,000매)`
- [ ] **예상 관리자 표시**: `수량: 0.5 | 단위: 연 (2,000매)`

---

### ✅ 3. 봉투 (envelope)
**URL**: `/mlangprintauto/envelope/index.php`

**특수 규칙**: 없음

**테스트 케이스**:
- [ ] 종류: 중봉투
- [ ] 재질: 모조지 80g
- [ ] 규격: 220mm × 110mm
- [ ] 수량: 1000매
- [ ] **예상 장바구니 표시**: `수량: 1000 | 단위: 매`
- [ ] **예상 주문완료 표시**: `수량: 1000매`
- [ ] **예상 관리자 표시**: `수량: 1000 | 단위: 매`

---

### ✅ 4. 스티커 (sticker_new)
**URL**: `/mlangprintauto/sticker_new/index.php`

**특수 규칙**: 없음

**테스트 케이스**:
- [ ] 종류: 사각
- [ ] 재질: 유포지
- [ ] 규격: 100mm × 50mm
- [ ] 수량: 500매
- [ ] **예상 장바구니 표시**: `수량: 500 | 단위: 매`
- [ ] **예상 주문완료 표시**: `수량: 500매`
- [ ] **예상 관리자 표시**: `수량: 500 | 단위: 매`

---

### ✅ 5. 자석스티커 (msticker)
**URL**: `/mlangprintauto/msticker/index.php`

**특수 규칙**: 없음

**테스트 케이스**:
- [ ] 종류: 사각
- [ ] 재질: 자석 0.3mm
- [ ] 규격: 100mm × 50mm
- [ ] 수량: 100매
- [ ] **예상 장바구니 표시**: `수량: 100 | 단위: 매`
- [ ] **예상 주문완료 표시**: `수량: 100매`
- [ ] **예상 관리자 표시**: `수량: 100 | 단위: 매`

---

### ✅ 6. 카다록 (cadarok)
**URL**: `/mlangprintauto/cadarok/index.php`

**특수 규칙**: 없음

**테스트 케이스**:
- [ ] 종류: 중철
- [ ] 재질: 모조지 100g
- [ ] 규격: A4
- [ ] 수량: 500부
- [ ] **예상 장바구니 표시**: `수량: 500 | 단위: 부`
- [ ] **예상 주문완료 표시**: `수량: 500부`
- [ ] **예상 관리자 표시**: `수량: 500 | 단위: 부`

---

### ✅ 7. 포스터 (littleprint)
**URL**: `/mlangprintauto/littleprint/index.php`

**특수 규칙**: 없음

**테스트 케이스**:
- [ ] 종류: 일반포스터
- [ ] 재질: 아트지 200g
- [ ] 규격: A2
- [ ] 수량: 100매
- [ ] **예상 장바구니 표시**: `수량: 100 | 단위: 매`
- [ ] **예상 주문완료 표시**: `수량: 100매`
- [ ] **예상 관리자 표시**: `수량: 100 | 단위: 매`

---

### ✅ 8. 상품권 (merchandisebond)
**URL**: `/mlangprintauto/merchandisebond/index.php`

**특수 규칙**: 없음

**테스트 케이스**:
- [ ] 종류: 일반상품권
- [ ] 재질: 고급지 250g
- [ ] 규격: 90mm × 50mm
- [ ] 수량: 500매
- [ ] **예상 장바구니 표시**: `수량: 500 | 단위: 매`
- [ ] **예상 주문완료 표시**: `수량: 500매`
- [ ] **예상 관리자 표시**: `수량: 500 | 단위: 매`

---

### ✅ 9. NCR양식 (ncrflambeau)
**URL**: `/mlangprintauto/ncrflambeau/index.php`

**특수 규칙**: 없음

**테스트 케이스**:
- [ ] 종류: 2도
- [ ] 재질: NCR 2도
- [ ] 규격: A4
- [ ] 수량: 500부
- [ ] **예상 장바구니 표시**: `수량: 500 | 단위: 부`
- [ ] **예상 주문완료 표시**: `수량: 500부`
- [ ] **예상 관리자 표시**: `수량: 500 | 단위: 부`

---

### ✅ 10. 리플렛 (leaflet)
**URL**: `/mlangprintauto/leaflet/index.php`

**특수 규칙**: 없음

**테스트 케이스**:
- [ ] 종류: 2단접지
- [ ] 재질: 모조지 100g
- [ ] 규격: A4
- [ ] 수량: 1000매
- [ ] **예상 장바구니 표시**: `수량: 1000 | 단위: 매`
- [ ] **예상 주문완료 표시**: `수량: 1000매`
- [ ] **예상 관리자 표시**: `수량: 1000 | 단위: 매`

---

## 🔍 레거시 데이터 호환성 테스트

**목적**: 과거 주문 데이터가 여전히 올바르게 표시되는지 확인

### 테스트 방법
1. 관리자 페이지에서 오래된 주문 조회 (data_version IS NULL)
2. 주문완료 페이지에서 과거 주문 확인

**검증 항목**:
- [ ] 표준 필드가 없어도 에러 없이 표시되는가?
- [ ] Fallback 로직이 레거시 필드 (jong, garo, sero 등)를 사용하는가?
- [ ] 공급가액이 money_4에서 읽히는가?

---

## ⚠️ 주요 검증 포인트 요약

### 1. 용어 통일
- [ ] "상품명" → **"품목"** (주문완료, 관리자)
- [ ] "금액" → **"공급가액"** (주문완료)

### 2. 컬럼 구조
- [ ] 주문완료: **"단위" 컬럼 없음** (수량에 포함)
- [ ] 관리자: **"인쇄비" 컬럼 삭제** (공급가액만 표시)

### 3. 가격 표시
- [ ] 모든 페이지에서 **"공급가액" 단일 표시** (디자인비+인쇄비 합산)
- [ ] ~~"디자인비", "인쇄비" 구분 없음~~

### 4. 수량 표시
- [ ] **전단지**: "X연 (Y매)" 형식
- [ ] **나머지 품목**: 숫자만 표시

### 5. 데이터 일관성
- [ ] 장바구니 → 주문완료 → 관리자 금액 **동일**
- [ ] Phase 3 표준 필드 (`quantity_display`, `price_supply`) 우선 사용
- [ ] 레거시 데이터 fallback 동작

---

## 🐛 알려진 이슈 / 주의사항

1. **bind_param 오류 징후**
   - 주문자 이름이 '0'으로 저장되면 → bind_param 개수 불일치
   - 즉시 add_to_basket.php 점검 필요

2. **number_format 반올림**
   - 0.5연 표시 시 반올림 주의
   - `number_format()` 사용 금지, `intval()` 사용

3. **대소문자 구분** (Linux 배포 시)
   - 모든 파일명/경로 소문자 확인
   - `mlangprintauto` (NOT `MlangPrintAuto`)

---

## ✅ 테스트 완료 체크

- [ ] 10개 품목 모두 테스트 완료
- [ ] 4개 페이지 모두 검증 완료
- [ ] 레거시 데이터 호환성 확인
- [ ] 데이터베이스 검증 SQL 실행
- [ ] 이슈 없음 확인

---

**작성자**: Claude Code
**Phase**: 8 - Integration Testing
**Date**: 2026-01-06
