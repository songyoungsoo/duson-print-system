# 일반 스티커 통합 시스템 구현 계획

## 구현 작업 목록

- [ ] 1. 네비게이션 드롭다운 메뉴 구현
  - 기존 `includes/nav.php` 파일을 수정하여 스티커 드롭다운 메뉴 추가
  - CSS 스타일링으로 드롭다운 효과 구현
  - 현재 페이지 활성화 표시 로직 개선
  - _요구사항: 1.1, 1.2, 1.3, 1.4_

- [ ] 2. 통합 가격 계산 엔진 개발
  - `includes/UnifiedPriceCalculator.php` 클래스 생성
  - 상품별 가격 계산 방식 분기 로직 구현
  - 스티커 전용 복잡한 수식 기반 계산 함수 구현
  - 테이블 기반 가격 계산 함수 구현
  - _요구사항: 2.1, 2.2, 5.1, 5.2, 5.3, 5.4_

- [ ] 3. 스티커 장바구니 통합 시스템 구현
  - `MlangPrintAuto/shop/add_to_basket.php` 수정하여 스티커 필드 지원
  - shop_temp 테이블 동적 컬럼 추가 로직 구현
  - 스티커 전용 필드(jong, garo, sero, mesu, uhyung, domusong) 처리
  - 장바구니 표시 포맷팅 함수 개선
  - _요구사항: 3.1, 3.2, 3.3, 3.4_

- [ ] 4. 장바구니 페이지 상품별 표시 개선
  - `MlangPrintAuto/shop/cart.php`에서 상품별 정보 표시 로직 개선
  - 스티커 상품 정보 포맷팅 함수 구현
  - 다른 상품과의 구분 표시 개선
  - 가격 정보 통합 표시
  - _요구사항: 3.2, 3.3_

- [ ] 5. 주문 데이터 구조 개선
  - MlangOrder_PrintAuto 테이블 구조 분석 및 문서화
  - ImgFolder 필드를 파일 폴더 경로로 사용하도록 수정
  - ThingCate 필드를 대표 이미지 파일명으로 사용하도록 수정
  - Type_1 필드에 상품별 상세 정보를 JSON 형태로 저장하는 로직 구현
  - _요구사항: 4.1, 4.2, 4.3, 4.4_

- [ ] 6. 통합 주문 처리 시스템 개발
  - `MlangOrder_PrintAuto/UnifiedOrderProcessor.php` 클래스 생성
  - 상품별 주문 데이터 준비 함수 구현
  - 파일 폴더 경로 자동 생성 로직 구현
  - 스티커 주문 데이터 JSON 변환 로직 구현
  - 다른 상품 주문 데이터 처리 로직 구현
  - _요구사항: 4.3, 4.4_

- [ ] 7. 관리자 주문 관리 시스템 개선
  - 관리자 페이지에서 상품별 주문 정보 표시 개선
  - 스티커 주문 상세 정보 포맷팅 함수 구현
  - JSON 형태의 Type_1 필드 파싱 및 표시 로직 구현
  - 파일 다운로드 기능 개선 (ImgFolder 경로 기반)
  - _요구사항: 6.1, 6.2, 6.3, 6.4_

- [ ] 8. 스티커 페이지 공통 인클루드 적용
  - `MlangPrintAuto/shop/view_modern.php`에 공통 헤더/푸터 적용
  - 현재 페이지 변수 설정 ($current_page = 'sticker')
  - 기존 스타일과 일관성 유지하면서 공통 디자인 적용
  - JavaScript 함수들의 호환성 확인 및 수정
  - _요구사항: 1.1_

- [ ] 9. 오류 처리 및 검증 로직 강화
  - 스티커 가격 계산 시 입력값 검증 강화
  - 크기 및 수량 제한 검증 로직 구현
  - 사용자 친화적 오류 메시지 개선
  - 예외 처리 및 로깅 시스템 구현
  - _요구사항: 2.3, 2.4_

- [ ] 10. 테스트 및 품질 보증
  - 각 기능별 단위 테스트 작성
  - 전체 주문 플로우 통합 테스트 수행
  - 다양한 브라우저에서 호환성 테스트
  - 성능 테스트 및 최적화
  - 보안 취약점 점검
  - _요구사항: 전체_

- [ ] 11. 문서화 및 배포 준비
  - API 문서 작성
  - 사용자 매뉴얼 업데이트
  - 관리자 가이드 작성
  - 배포 스크립트 준비
  - 백업 및 롤백 계획 수립
  - _요구사항: 전체_

## 구현 우선순위

### Phase 1: 핵심 기능 구현 (1-4주)
- 작업 1, 2, 3: 네비게이션, 가격 계산, 장바구니 통합
- 기본적인 스티커 주문 플로우 완성

### Phase 2: 시스템 통합 (2-3주)  
- 작업 4, 5, 6: 장바구니 표시, 주문 구조, 주문 처리
- 전체 시스템 통합 완성

### Phase 3: 관리 및 최적화 (1-2주)
- 작업 7, 8, 9: 관리자 기능, 페이지 통합, 오류 처리
- 시스템 안정성 및 사용성 개선

### Phase 4: 품질 보증 (1주)
- 작업 10, 11: 테스트, 문서화, 배포 준비
- 최종 품질 검증 및 배포

## 기술적 고려사항

### 데이터베이스 변경
- shop_temp 테이블에 스티커 전용 컬럼 추가 필요
- 기존 데이터와의 호환성 유지
- 마이그레이션 스크립트 작성

### 성능 최적화
- 복잡한 스티커 가격 계산 로직 최적화
- 데이터베이스 쿼리 성능 개선
- 프론트엔드 JavaScript 최적화

### 보안 강화
- 입력값 검증 강화
- SQL Injection 방지
- XSS 공격 방지
- 파일 업로드 보안

### 호환성 유지
- 기존 시스템과의 호환성 보장
- 기존 사용자 데이터 보존
- 점진적 마이그레이션 지원