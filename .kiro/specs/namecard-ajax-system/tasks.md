# 명함 자동견적 시스템 구현 작업 목록

## 구현 작업 목록

- [ ] 1. 데이터베이스 스키마 및 초기 데이터 설정
  - 데이터베이스 테이블 구조 생성 및 인덱스 최적화
  - 테스트용 명함 종류, 용지, 가격 데이터 삽입
  - 데이터베이스 연결 설정 및 보안 구성
  - _요구사항: 5.1, 5.2, 5.3_

- [ ] 2. 서버 사이드 AJAX 엔드포인트 구현
  - [ ] 2.1 용지 종류 조회 엔드포인트 구현
    - get_namecard_types.php 파일 생성
    - MlangPrintAuto_transactionCate 테이블 조회 로직 구현
    - JSON 응답 형식 및 에러 처리 구현
    - _요구사항: 3.1, 5.1_

  - [ ] 2.2 수량 옵션 조회 엔드포인트 구현
    - get_namecard_quantities.php 파일 생성
    - MlangPrintAuto_NameCard 테이블에서 DISTINCT quantity 조회
    - 명함 종류와 용지 조합별 수량 필터링 로직 구현
    - _요구사항: 3.2, 5.2_

  - [ ] 2.3 인쇄면 옵션 조회 엔드포인트 구현
    - get_namecard_sides.php 파일 생성
    - POtype 필드 기반 단면/양면 옵션 조회
    - 선택된 조합에 따른 동적 옵션 필터링
    - _요구사항: 3.3, 5.2_

  - [ ] 2.4 가격 계산 엔드포인트 구현
    - namecard_price_ajax.php 파일 생성
    - 주문 방법별 가격 계산 로직 (디자인+인쇄, 인쇄만, 디자인만)
    - 부가세 계산 및 최종 금액 산출
    - 가격 정보 부재 시 에러 응답 처리
    - _요구사항: 4.1, 4.2, 4.3, 4.4_

- [ ] 3. 클라이언트 사이드 AJAX 통신 매니저 구현
  - XMLHttpRequest 객체 생성 및 관리 함수 구현
  - 공통 AJAX 에러 처리 및 로깅 시스템 구현
  - JSON 응답 파싱 및 검증 로직 구현
  - 비동기 요청 상태 관리 및 중복 요청 방지
  - _요구사항: 3.1, 3.2, 3.3, 3.4_

- [ ] 4. 연쇄적 옵션 업데이트 시스템 구현
  - [ ] 4.1 명함 종류 변경 핸들러 구현
    - change_NameCard_Field 함수 구현
    - 기존 옵션 초기화 및 새 용지 옵션 로드
    - 다음 단계 함수 자동 호출 체인 구현
    - _요구사항: 2.1, 2.2_

  - [ ] 4.2 수량 옵션 업데이트 함수 구현
    - updateNameCardQuantities 함수 구현
    - 명함 종류와 용지에 따른 수량 옵션 동적 로드
    - 수량 로드 완료 후 인쇄면 옵션 자동 업데이트
    - _요구사항: 2.2, 2.3_

  - [ ] 4.3 인쇄면 옵션 업데이트 함수 구현
    - updateNameCardSides 함수 구현
    - 선택된 조합에 따른 단면/양면 옵션 표시
    - 인쇄면 로드 완료 후 자동 가격 계산 트리거
    - _요구사항: 2.3, 2.4_

- [ ] 5. 실시간 가격 계산 시스템 구현
  - nc_calc_ok 함수 구현 및 필수 옵션 검증 로직
  - 가격 계산 AJAX 요청 및 응답 처리
  - 인쇄비, 편집비, 부가세, 총액 필드 업데이트
  - 선택된 옵션의 텍스트 값 저장 (주문 시 사용)
  - _요구사항: 4.1, 4.2, 4.3_

- [ ] 6. 메인 페이지 및 폼 구조 구현
  - [ ] 6.1 HTML 폼 구조 및 초기 데이터 로드
    - index.php 메인 페이지 구조 생성
    - 명함 종류 드롭다운 초기 데이터 PHP로 로드
    - 첫 번째 명함 종류의 용지 옵션 초기 표시
    - _요구사항: 1.1, 1.2, 1.3_

  - [ ] 6.2 폼 요소 이벤트 핸들러 연결
    - 각 드롭다운의 onchange 이벤트 핸들러 설정
    - 옵션 변경 시 연쇄 업데이트 함수 호출
    - 사용자 인터페이스 반응성 최적화
    - _요구사항: 6.1, 6.2_

- [ ] 7. 주문 데이터 검증 및 제출 시스템 구현
  - CheckTotal 함수 구현 및 필수 필드 검증
  - 숨겨진 폼 필드에 선택 옵션 데이터 저장
  - 주문 정보 완성도 검사 및 사용자 안내
  - OnlineOrder.php로의 폼 제출 처리
  - _요구사항: 7.1, 7.2, 7.3_

- [ ] 8. 에러 처리 및 사용자 피드백 시스템 구현
  - 클라이언트 사이드 AJAX 에러 처리 및 사용자 알림
  - 서버 사이드 데이터베이스 에러 처리 및 로깅
  - 네트워크 오류 및 타임아웃 처리
  - 사용자 친화적 에러 메시지 표시 시스템
  - _요구사항: 3.4, 6.4_

- [ ] 9. 성능 최적화 및 사용자 경험 개선
  - [ ] 9.1 AJAX 요청 최적화 구현
    - 디바운싱을 통한 불필요한 요청 방지
    - 요청 중복 방지 및 로딩 상태 표시
    - DOM 조작 배치 처리로 렌더링 성능 향상
    - _요구사항: 6.1, 6.2_

  - [ ] 9.2 데이터베이스 쿼리 최적화
    - 인덱스 최적화 및 쿼리 성능 튜닝
    - 자주 사용되는 옵션 데이터 캐싱 구현
    - Prepared Statement를 통한 보안 및 성능 향상
    - _요구사항: 5.4_

- [ ] 10. 보안 강화 및 입력 검증 구현
  - SQL 인젝션 방지를 위한 Prepared Statement 적용
  - XSS 방지를 위한 출력 데이터 이스케이프 처리
  - CSRF 토큰 검증 시스템 구현
  - 입력 데이터 검증 및 필터링 강화
  - _요구사항: 5.4_

- [ ] 11. 단위 테스트 및 통합 테스트 구현
  - [ ] 11.1 JavaScript 함수 단위 테스트 작성
    - 옵션 업데이트 함수들의 단위 테스트
    - AJAX 통신 함수 모킹 및 테스트
    - DOM 조작 함수 테스트 케이스 작성
    - _요구사항: 모든 클라이언트 사이드 기능_

  - [ ] 11.2 PHP 엔드포인트 단위 테스트 작성
    - 각 AJAX 엔드포인트의 단위 테스트
    - 데이터베이스 모킹 및 테스트 데이터 설정
    - 에러 케이스 및 예외 상황 테스트
    - _요구사항: 모든 서버 사이드 기능_

- [ ] 12. 사용자 시나리오 E2E 테스트 구현
  - 전체 명함 주문 프로세스 E2E 테스트 작성
  - 다양한 옵션 조합에 대한 시나리오 테스트
  - 에러 상황 및 복구 시나리오 테스트
  - 브라우저 호환성 테스트 및 검증
  - _요구사항: 1.1~7.4 (전체 사용자 여정)_

- [ ] 13. 문서화 및 배포 준비
  - API 엔드포인트 문서화 및 사용법 가이드 작성
  - 데이터베이스 스키마 문서 및 마이그레이션 스크립트
  - 시스템 설치 및 설정 가이드 문서 작성
  - 운영 환경 배포 체크리스트 및 모니터링 설정
  - _요구사항: 전체 시스템 운영 및 유지보수_