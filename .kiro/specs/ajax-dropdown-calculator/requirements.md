# 요구사항 문서

## 소개

현재 `MlangPrintAuto/inserted/index.php` 파일의 정적 드롭다운 시스템을 Ajax 기반의 동적 드롭다운 시스템으로 개선하여, 사용자가 상위 카테고리를 선택할 때마다 하위 옵션들이 실시간으로 업데이트되도록 하는 기능입니다. 이를 통해 사용자 경험을 향상시키고 데이터베이스 구조에 맞는 정확한 옵션을 제공합니다.

## 요구사항

### 요구사항 1

**사용자 스토리:** 사용자로서, 인쇄색상을 선택할 때 해당 색상에 맞는 종이종류와 종이규격이 자동으로 업데이트되기를 원합니다. 이를 통해 올바른 조합만 선택할 수 있도록 하고 싶습니다.

#### 승인 기준

1. WHEN 사용자가 인쇄색상(MY_type) 드롭다운을 변경 THEN 시스템 SHALL 종이종류(MY_Fsd)와 종이규격(PN_type) 드롭다운을 초기화하고 새로운 옵션으로 업데이트
2. WHEN 상위 드롭다운이 변경 THEN 하위 드롭다운들의 기존 선택값 SHALL 초기화
3. WHEN Ajax 요청이 실행 THEN 시스템 SHALL 로딩 상태를 사용자에게 표시

### 요구사항 2

**사용자 스토리:** 사용자로서, 종이종류를 선택할 때 해당 종이에 맞는 종이규격만 표시되기를 원합니다. 이를 통해 불가능한 조합을 선택하는 실수를 방지하고 싶습니다.

#### 승인 기준

1. WHEN 사용자가 종이종류(MY_Fsd)를 선택 THEN 시스템 SHALL 해당 종이종류에 맞는 종이규격(PN_type) 옵션만 표시
2. WHEN 종이종류가 변경 THEN 종이규격 드롭다운 SHALL 비워지고 새로운 옵션으로 채워짐
3. WHEN 데이터베이스에서 관련 데이터가 없음 THEN 시스템 SHALL 적절한 메시지를 사용자에게 표시

### 요구사항 3

**사용자 스토리:** 개발자로서, 데이터베이스 테이블 구조를 기반으로 한 안전한 Ajax 통신을 구현하고 싶습니다. 이를 통해 SQL 인젝션 등의 보안 위험을 방지하고 싶습니다.

#### 승인 기준

1. WHEN Ajax 요청이 전송 THEN 모든 파라미터는 적절히 검증되고 이스케이프 처리 SHALL 수행
2. WHEN 데이터베이스 쿼리가 실행 THEN prepared statement 또는 적절한 이스케이프 함수를 사용 SHALL 수행
3. WHEN 에러가 발생 THEN 적절한 에러 메시지를 반환하고 로그에 기록 SHALL 수행

### 요구사항 4

**사용자 스토리:** 사용자로서, 드롭다운 선택이 완료되면 자동으로 가격이 계산되기를 원합니다. 이를 통해 별도의 계산 버튼을 누르지 않고도 실시간으로 견적을 확인하고 싶습니다.

#### 승인 기준

1. WHEN 모든 필수 드롭다운 값이 선택 THEN 자동으로 가격 계산이 실행 SHALL 수행
2. WHEN 가격 계산이 완료 THEN 인쇄비, 디자인비, 총액이 화면에 표시 SHALL 수행
3. WHEN 필수 값이 누락 THEN 가격 필드는 비워지고 적절한 안내 메시지 표시 SHALL 수행

### 요구사항 5

**사용자 스토리:** 사용자로서, 네트워크 지연이나 에러 상황에서도 적절한 피드백을 받고 싶습니다. 이를 통해 시스템 상태를 명확히 파악하고 싶습니다.

#### 승인 기준

1. WHEN Ajax 요청이 진행 중 THEN 로딩 인디케이터가 표시 SHALL 수행
2. WHEN Ajax 요청이 실패 THEN 사용자에게 에러 메시지를 표시하고 이전 상태로 복원 SHALL 수행
3. WHEN 네트워크 타임아웃이 발생 THEN 적절한 타임아웃 메시지를 표시 SHALL 수행

### 요구사항 6

**사용자 스토리:** 개발자로서, 기존 시스템과의 호환성을 유지하면서 새로운 Ajax 기능을 추가하고 싶습니다. 이를 통해 기존 기능에 영향을 주지 않고 개선하고 싶습니다.

#### 승인 기준

1. WHEN 새로운 Ajax 시스템이 구현 THEN 기존 폼 제출 기능은 그대로 유지 SHALL 수행
2. WHEN 기존 JavaScript 함수들이 호출 THEN 정상적으로 동작 SHALL 수행
3. WHEN 파일 업로드 기능이 사용 THEN Ajax 시스템과 충돌 없이 동작 SHALL 수행