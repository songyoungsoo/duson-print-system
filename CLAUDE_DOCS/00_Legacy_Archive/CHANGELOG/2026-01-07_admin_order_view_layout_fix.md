# 관리자 주문서 출력 레이아웃 수정

**날짜**: 2026-01-07
**작업**: 주문서 출력 테이블 컬럼 너비 조정 및 품목 정렬 개선
**상태**: ✅ 완료 (프로덕션 배포 완료)

---

## 📌 문제 상황

### 증상
- 주문서 출력 페이지 (`admin.php?mode=OrderView`) 에서:
  1. 오른쪽에 빈 공란이 표시됨 (12% 빈 컬럼)
  2. 규격/옵션 칸이 너무 넓음 (47%)
  3. 공급가액 칸이 너무 좁음 (10%)
  4. 품목 내용이 왼쪽 정렬되어 보기 불편

### 근본 원인
1. **colgroup에 7개 컬럼 정의**되어 있었으나 실제 테이블 헤더는 6개만 있음
2. 7번째 빈 컬럼(12%)이 오른쪽에 공란으로 표시
3. 규격/옵션 컬럼이 과도하게 넓게 설정됨 (47%)
4. 공급가액 컬럼이 너무 좁게 설정됨 (10%)
5. 품목 셀에 text-align 미지정으로 왼쪽 정렬

---

## 🔧 해결 방법

### 1단계: 빈 컬럼 제거
**파일**: `mlangorder_printauto/OrderFormOrderTree.php`

**Before**:
```php
<colgroup>
    <col style="width: 5%;">
    <col style="width: 15%;">
    <col style="width: 40%;">
    <col style="width: 10%;">
    <col style="width: 8%;">
    <col style="width: 10%;">
    <col style="width: 12%;">  <!-- ❌ 7번째 빈 컬럼 -->
</colgroup>
```

**After**:
```php
<colgroup>
    <col style="width: 6%;">
    <col style="width: 17%;">
    <col style="width: 35%;">  <!-- ✅ 47% → 35% 축소 -->
    <col style="width: 11%;">
    <col style="width: 9%;">
    <col style="width: 22%;">  <!-- ✅ 10% → 22% 확대 -->
</colgroup>
```

### 2단계: 컬럼 너비 재분배

| 컬럼 | 1단계 (빈칸 제거) | 2단계 (최종) | 총 변경 |
|------|-------------------|--------------|---------|
| NO | 5% → 6% | 6% | +1% |
| 품목 | 15% → 17% | 17% | +2% |
| **규격/옵션** | 40% → 47% | **35%** | **-5%** ⬇️ |
| 수량 | 10% → 11% | 11% | +1% |
| 단위 | 8% → 9% | 9% | +1% |
| **공급가액** | 10% → 10% | **22%** | **+12%** ⬆️ |
| ~~빈칸~~ | ~~12%~~ | - | **제거** |

### 3단계: 품목 중앙 정렬

**Before**:
```php
<td style="border: 0.3pt solid #000; padding: 1.5mm;"><?= $item_type_display ?></td>
```

**After**:
```php
<td style="border: 0.3pt solid #000; padding: 1.5mm; text-align: center;"><?= $item_type_display ?></td>
```

---

## ✅ 수정 결과

### Before (수정 전)
```
┌──────┬────────┬─────────────────────────────────────────┬──────┬──────┬────────┬─────────┐
│  NO  │  품목  │           규격/옵션 (47%)              │ 수량 │ 단위 │공급가액│  (빈칸) │
│      │ (왼쪽) │                                         │      │      │ (10%)  │  (12%)  │
└──────┴────────┴─────────────────────────────────────────┴──────┴──────┴────────┴─────────┘
```

### After (수정 후)
```
┌──────┬────────┬──────────────────────────┬──────┬──────┬──────────────┐
│  NO  │  품목  │   규격/옵션 (35%)       │ 수량 │ 단위 │  공급가액    │
│      │(중앙)  │                          │      │      │   (22%)      │
└──────┴────────┴──────────────────────────┴──────┴──────┴──────────────┘
```

### 변경 사항 요약:
1. ✅ 오른쪽 빈 공란 제거 (12%)
2. ✅ 규격/옵션 너비 축소 (47% → 35%, -12%)
3. ✅ 공급가액 너비 확대 (10% → 22%, +12%)
4. ✅ 품목 내용 중앙 정렬
5. ✅ colspan 값 7→6으로 일관성 확보

---

## 📊 영향 범위

### ✅ 수정된 페이지
- **관리자 주문서 출력**: `admin/mlangprintauto/admin.php?mode=OrderView&no={주문번호}`
  - 상단 주문 상품 테이블 (0.3pt border)
  - 하단 주문 상품 테이블 (1px border)

### 🔒 영향 없는 페이지
- 고객용 주문 완료 페이지
- 견적서 페이지
- 장바구니 페이지

---

## 🚀 배포 정보

### 배포 파일
```
mlangorder_printauto/OrderFormOrderTree.php
```

### 배포 방법
```bash
# FTP 업로드
curl -T "Y:\var\www\html\mlangorder_printauto\OrderFormOrderTree.php" \
  -u "dsp1830:ds701018" \
  "ftp://dsp1830.shop/mlangorder_printauto/OrderFormOrderTree.php"
```

### 배포 시각
2026-01-07 (로컬 테스트 완료 → 프로덕션 배포)

---

## 🔍 테스트 체크리스트

- [x] 로컬 환경에서 레이아웃 확인
- [x] 빈 공란 제거 확인
- [x] 규격/옵션 칸 축소 확인
- [x] 공급가액 칸 확대 확인
- [x] 품목 중앙 정렬 확인
- [x] 프로덕션 배포
- [ ] 프로덕션 환경에서 실제 주문서 출력 테스트

---

## 📝 관련 파일

**수정된 파일**:
- `mlangorder_printauto/OrderFormOrderTree.php` (lines 1055-1082, 638-640, 1215-1217)

**관련 문서**:
- [CLAUDE.md](../CLAUDE.md) - 프로젝트 개요
- [quantity_display_validation_fix.md](2026-01-07_quantity_display_validation_fix.md) - 동일 세션의 이전 수정

---

## 💡 교훈

### UI 레이아웃 수정 시 주의사항:
1. **colgroup과 실제 컬럼 개수 일치 확인**
   - colgroup 정의 개수 = 실제 th 개수
   - 불일치 시 빈 공란 발생

2. **colspan 값 일관성 확보**
   - 헤더, 에러 메시지, 합계 행 모두 동일한 colspan 사용

3. **너비 합계 100% 확인**
   - 모든 컬럼 너비 합계가 100%가 되도록 계산

4. **테스트 시 실제 데이터로 확인**
   - 빈 테이블만 보지 말고 실제 주문 데이터로 레이아웃 확인

---

**작성자**: Claude Code
**검증**: ✅ 로컬 테스트 완료, 프로덕션 배포 완료
**우선순위**: 🟡 IMPORTANT - UI 개선

