# 롤스티커 견적 계산 로직 문서

## 📋 개요
두손기획인쇄 롤스티커 견적 자동 계산 시스템의 전체 계산 로직을 정리한 문서입니다.

---

## 🎯 입력 파라미터

### 기본 정보
- **가로 (width)**: mm 단위
- **세로 (height)**: mm 단위  
- **매수 (quantity)**: 제작 수량
- **칼 개수 (knife_count)**: 톰슨칼 개수 (1~20개)
- **도수 (colors)**: 인쇄 색상 수 (1~5도)

### 재질 선택 (material)
| 재질 코드 | 재질명 | 단가 (원/㎟) | 최소비용 |
|----------|--------|-------------|----------|
| art | 아트지 | 1.5 | 15,000원 |
| yupo | 유포지 | 2.5 | 25,000원 |
| silver_deadlong | 은데드롱 | 2.5 | 25,000원 |
| clear_deadlong | 투명데드롱 | 2.5 | 25,000원 |
| gold_paper | 금지 | 3.5 | 35,000원 |
| silver_paper | 은지 | 3.5 | 35,000원 |
| kraft | 크라프트 | 2.3 | 23,000원 |
| hologram | 홀로그램 | 5.0 | 50,000원 |

### 선택 옵션
- **도안 필요 (need_design)**: 체크박스
- **추가비용 (additional_cost)**: 숫자 입력
- **코팅 (coating)**: none / glossy / matte / uv
- **박 (foil)**: none / glossy_gold / matte_gold / glossy_silver / matte_silver
- **동판 필요 (need_plate)**: 체크박스
- **형압 (embossing)**: none / raised / recessed
- **부분코팅 (partial_coating)**: 체크박스

---

## 💰 계산 로직 상세

### 1. 재질비 (area_cost)
```
재질비 = MAX(재질단가 × 10,000원, (재질단가 × 가로 × 세로 × 매수) ÷ 1000)
```
- **재질단가**: 선택한 재질의 ㎟당 가격
- **최소비용**: 재질단가 × 10,000원
- **총 면적**: 가로 × 세로 × 매수 (㎟)
- **예시 1**: 아트지(1.5원/㎟), 50mm × 50mm, 100매
  - 계산값 = (1.5 × 50 × 50 × 100) ÷ 1000 = 375원
  - 최소값 = 1.5 × 10,000 = 15,000원
  - **재질비 = 15,000원** (최소값 적용)
- **예시 2**: 아트지(1.5원/㎟), 100mm × 100mm, 1000매
  - 계산값 = (1.5 × 100 × 100 × 1000) ÷ 1000 = 15,000원
  - 최소값 = 1.5 × 10,000 = 15,000원
  - **재질비 = 15,000원** (동일)
- **예시 3**: 유포지(2.5원/㎟), 100mm × 100mm, 1000매
  - 계산값 = (2.5 × 100 × 100 × 1000) ÷ 1000 = 25,000원
  - 최소값 = 2.5 × 10,000 = 25,000원
  - **재질비 = 25,000원** (동일)
- **예시 4**: 홀로그램(5.0원/㎟), 100mm × 100mm, 1000매
  - 계산값 = (5.0 × 100 × 100 × 1000) ÷ 1000 = 50,000원
  - 최소값 = 5.0 × 10,000 = 50,000원
  - **재질비 = 50,000원** (동일)

---

### 2. 도안비 (design_cost)
```
도안비 = MAX(10,000원, 도수 × 5,000원)
```
- **조건**: 도안 필요 체크시만 적용
- **최소값**: 10,000원
- **예시**: 
  - 1도: 10,000원 (최소값 적용)
  - 3도: 15,000원 (3 × 5,000)
  - 5도: 25,000원 (5 × 5,000)

---

### 3. 필름비 (film_cost)
```
필름비 = MAX(4,000원, 가로 × 세로 × 1원) × 도수
```
- **단가**: 1원/㎟
- **최소값**: 4,000원 (1도당)
- **도수 적용**: 도수만큼 곱하기
- **예시**: 100mm × 100mm, 4도
  - 1도당 필름비 = MAX(4,000, 100 × 100 × 1) = 10,000원
  - 총 필름비 = 10,000 × 4 = 40,000원

---

### 4. 수지판비 (resin_cost)
```
수지판비 = MAX(5,000원, 가로 × 세로 × 3원) × 도수
```
- **단가**: 3원/㎟
- **최소값**: 5,000원 (1도당)
- **도수 적용**: 도수만큼 곱하기
- **예시**: 100mm × 100mm, 4도
  - 1도당 수지판비 = MAX(5,000, 100 × 100 × 3) = 30,000원
  - 총 수지판비 = 30,000 × 4 = 120,000원

---

### 5. 도무송비 (embossing_cost)
```
도무송비 = MAX(10,000원, 가로 × 세로 × 2원) × 칼개수
```
- **단가**: 2원/㎟
- **최소값**: 10,000원 (칼 1개당)
- **칼개수 적용**: 칼 개수만큼 곱하기
- **예시**: 100mm × 100mm, 칼 3개
  - 1개당 도무송비 = MAX(10,000, 100 × 100 × 2) = 20,000원
  - 총 도무송비 = 20,000 × 3 = 60,000원

---

### 6. 인쇄비 (printing_cost)
```
인쇄비 = MAX(10,000원, 매수 × 도수 × 10원)
```
- **단가**: 10원 (매당 도당)
- **최소값**: 10,000원
- **예시 1**: 500매, 2도
  - 계산값 = 500 × 2 × 10 = 10,000원
  - **인쇄비 = 10,000원** (최소값 적용)
- **예시 2**: 1000매, 4도
  - 계산값 = 1000 × 4 × 10 = 40,000원
  - **인쇄비 = 40,000원**

---

### 7. 백색인쇄비 (white_printing_cost)
```
백색인쇄비 = MAX(20,000원, 매수 × 20원)
```
- **조건**: 백색인쇄 체크시만 적용
- **단가**: 20원 (매당)
- **최소값**: 20,000원
- **예시 1**: 500매
  - 계산값 = 500 × 20 = 10,000원
  - **백색인쇄비 = 20,000원** (최소값 적용)
- **예시 2**: 2000매
  - 계산값 = 2000 × 20 = 40,000원
  - **백색인쇄비 = 40,000원**

---

### 7-1. 백색인쇄 필름비 (white_film_cost)
```
백색인쇄 필름비 = MAX(4,000원, 가로 × 세로 × 1원)
```
- **조건**: 백색인쇄 선택시 자동 적용
- **단가**: 1원/㎟
- **최소값**: 4,000원
- **예시**: 100mm × 100mm
  - 백색인쇄 필름비 = MAX(4,000, 100 × 100 × 1) = 10,000원

---

### 7-2. 백색인쇄 수지판비 (white_resin_cost)
```
백색인쇄 수지판비 = MAX(5,000원, 가로 × 세로 × 3원)
```
- **조건**: 백색인쇄 선택시 자동 적용
- **단가**: 3원/㎟
- **최소값**: 5,000원
- **예시**: 100mm × 100mm
  - 백색인쇄 수지판비 = MAX(5,000, 100 × 100 × 3) = 30,000원

---

### 8. 코팅비 (coating_cost)
```
코팅비 = (매수 ÷ 1000) × 코팅단가
```
- **조건**: 코팅 선택시만 적용
- **코팅 단가** (1000매당):
  - 유광 (glossy): 50,000원
  - 무광 (matte): 40,000원
  - UV: 10,000원
- **예시**: 2000매, 유광 코팅
  - 코팅비 = (2000 ÷ 1000) × 50,000 = 100,000원

---

### 9. 박 비용 (foil_cost)
```
박비용 = MAX(35,000원, 가로 × 세로 × 매수 × 0.016원)
```
- **조건**: 박 선택시만 적용
- **단가**: 0.016원/㎟
- **최소값**: 35,000원
- **박 종류**: 유광금박 / 무광금박 / 유광은박 / 무광은박
- **예시**: 100mm × 100mm, 1000매
  - 박비용 = MAX(35,000, 100 × 100 × 1000 × 0.016) = 160,000원

---

### 10. 동판비 (plate_cost)
```
동판비 = MAX(5,000원, 가로 × 세로 × 5원)
```
- **조건**: 
  - 박 선택시 자동 적용
  - 또는 동판 체크박스 선택시 적용
- **단가**: 5원/㎟
- **최소값**: 5,000원
- **예시**: 100mm × 100mm
  - 동판비 = MAX(5,000, 100 × 100 × 5) = 50,000원

---

### 11. 형압비 (embossing_press_cost)
```
형압비 = (매수 ÷ 1000) × 30,000원
```
- **조건**: 형압 선택시만 적용 (양각/음각)
- **단가**: 30,000원/1000매
- **예시**: 2000매, 양각
  - 형압비 = (2000 ÷ 1000) × 30,000 = 60,000원

---

### 12. 형압용수지판비 (embossing_plate_cost)
```
형압용수지판비 = MAX(5,000원, 가로 × 세로 × 3원) × 2개
```
- **조건**: 형압 선택시 자동 적용
- **단가**: 3원/㎟
- **최소값**: 5,000원 (1개당)
- **수량**: 암수 2개
- **예시**: 100mm × 100mm
  - 1개당 = MAX(5,000, 100 × 100 × 3) = 30,000원
  - 총 형압용수지판비 = 30,000 × 2 = 60,000원

---

### 13. 부분코팅비 (partial_coating_cost)
```
부분코팅비 = (매수 ÷ 1000) × 30,000원
```
- **조건**: 부분코팅 체크시만 적용
- **단가**: 30,000원/1000매
- **예시**: 2000매
  - 부분코팅비 = (2000 ÷ 1000) × 30,000 = 60,000원

---

### 14. 추가비용 (additional_cost)
```
추가비용 = 입력값
```
- **조건**: 사용자가 직접 입력
- **용도**: 기타 추가 작업이나 특수 요청사항

---

## 📊 최종 금액 계산

### 공급가 (supply_price)
```
공급가 = 재질비 + 도안비 + 필름비 + 수지판비 + 도무송비 + 인쇄비 
       + 백색인쇄비 + 백색인쇄필름비 + 백색인쇄수지판비
       + 코팅비 + 박비용 + 동판비 + 형압비 + 형압용수지판비 
       + 부분코팅비 + 추가비용
```

### 부가세 (vat)
```
부가세 = 공급가 × 0.1 (10%)
```

### 총 금액 (total_price)
```
총 금액 = 공급가 × 1.1
```

---

## 🔄 자동 적용 규칙

### 1. 박 선택 → 동판비 자동 적용
- 박(금박/은박)을 선택하면 동판비가 자동으로 계산됨
- 사용자가 별도로 동판 체크박스를 선택할 필요 없음

### 2. 형압 선택 → 형압용수지판비 자동 적용
- 형압(양각/음각)을 선택하면 형압용수지판비(암수 2개)가 자동으로 계산됨

### 3. 백색인쇄 선택 → 백색인쇄 필름비 + 수지판비 자동 적용
- 백색인쇄를 선택하면 백색인쇄용 필름비와 수지판비가 자동으로 계산됨
- 백색인쇄는 투명/특수 재질에 주로 사용됨

---

## 📝 계산 예시

### 예시 1: 기본 롤스티커
**입력값:**
- 사이즈: 100mm × 100mm
- 매수: 1000매
- 칼 개수: 1개
- 재질: 아트지 (1.5원/㎟)
- 도수: 4도 (풀컬러)
- 옵션: 없음

**계산:**
1. 재질비 = MAX(15,000, 15,000) = 15,000원
2. 필름비 = MAX(4,000, 10,000) × 4 = 40,000원
3. 수지판비 = MAX(5,000, 30,000) × 4 = 120,000원
4. 도무송비 = MAX(10,000, 20,000) × 1 = 20,000원
5. 인쇄비 = MAX(10,000, 40,000) = 40,000원

**공급가** = 15,000 + 40,000 + 120,000 + 20,000 + 40,000 = **235,000원**  
**부가세** = 23,500원  
**총 금액** = **258,500원**

---

### 예시 2: 고급 옵션 포함
**입력값:**
- 사이즈: 100mm × 100mm
- 매수: 2000매
- 칼 개수: 2개
- 재질: 유포지 (2.5원/㎟)
- 도수: 4도
- 옵션: 
  - 도안 필요 ✓
  - 유광 코팅 ✓
  - 유광 금박 ✓
  - 양각 형압 ✓

**계산:**
1. 재질비 = MAX(25,000, 50,000) = 50,000원
2. 도안비 = MAX(10,000, 20,000) = 20,000원
3. 필름비 = 10,000 × 4 = 40,000원
4. 수지판비 = 30,000 × 4 = 120,000원
5. 도무송비 = 20,000 × 2 = 40,000원
6. 인쇄비 = MAX(10,000, 80,000) = 80,000원
7. 코팅비 = (2000 ÷ 1000) × 50,000 = 100,000원
8. 박비용 = MAX(35,000, 320,000) = 320,000원
9. 동판비 = MAX(5,000, 50,000) = 50,000원 (박 선택으로 자동)
10. 형압비 = (2000 ÷ 1000) × 30,000 = 60,000원
11. 형압용수지판비 = 30,000 × 2 = 60,000원 (형압 선택으로 자동)

**공급가** = 50,000 + 20,000 + 40,000 + 120,000 + 40,000 + 80,000 + 100,000 + 320,000 + 50,000 + 60,000 + 60,000 = **940,000원**  
**부가세** = 94,000원  
**총 금액** = **1,034,000원**

---

### 예시 3: 백색인쇄 포함
**입력값:**
- 사이즈: 100mm × 100mm
- 매수: 1000매
- 칼 개수: 1개
- 재질: 투명데드롱 (2.5원/㎟)
- 도수: 4도
- 옵션: 
  - 백색인쇄 필요 ✓

**계산:**
1. 재질비 = MAX(25,000, 25,000) = 25,000원
2. 필름비 = 10,000 × 4 = 40,000원
3. 수지판비 = 30,000 × 4 = 120,000원
4. 도무송비 = 20,000 × 1 = 20,000원
5. 인쇄비 = MAX(10,000, 40,000) = 40,000원
6. 백색인쇄비 = MAX(20,000, 20,000) = 20,000원
7. 백색인쇄 필름비 = MAX(4,000, 10,000) = 10,000원
8. 백색인쇄 수지판비 = MAX(5,000, 30,000) = 30,000원

**공급가** = 25,000 + 40,000 + 120,000 + 20,000 + 40,000 + 20,000 + 10,000 + 30,000 = **305,000원**  
**부가세** = 30,500원  
**총 금액** = **335,500원**

---

## 🎨 UI/UX 특징

### 입력 폼
- 2열 그리드 레이아웃으로 효율적인 공간 활용
- 실시간 입력값 유지 (POST 후에도 값 보존)
- 드롭다운으로 선택 옵션 제공
- 체크박스로 선택적 옵션 제공
- 도움말 텍스트로 사용자 가이드

### 결과 표시
- 입력 정보 요약 (사이즈, 매수, 도수, 총 면적)
- 각 항목별 상세 계산 내역
- 선택한 옵션만 표시 (조건부 렌더링)
- 자동 적용 항목 표시 (예: "박 선택으로 자동 포함")
- 최종 금액 강조 표시 (공급가, 부가세, 총 금액)

### 반응형 디자인
- 데스크톱: 2열 레이아웃 (입력폼 | 결과)
- 모바일: 1열 레이아웃 (세로 스택)

---

## 🔧 기술 스택

- **언어**: PHP 7.4+
- **프론트엔드**: HTML5, CSS3 (순수 CSS, 그리드 레이아웃)
- **데이터 처리**: POST 방식
- **세션 관리**: PHP Session
- **데이터베이스**: MySQL (db.php 연동)

---

## 📞 문의 정보

- **전화**: 02-2632-1830 / 1688-2384
- **이메일**: dsp1830@naver.com
- **회사**: 두손기획인쇄

---

## 📌 주요 특징

1. **정확한 계산**: 업계 표준 단가 적용
2. **최소값 보장**: 각 항목별 최소 금액 설정
3. **자동 연동**: 
   - 박 선택 → 동판비 자동
   - 형압 선택 → 형압용수지판비 자동
   - 백색인쇄 선택 → 백색인쇄 필름비/수지판비 자동
4. **투명한 견적**: 모든 계산 과정 상세 표시
5. **사용자 친화적**: 직관적인 UI/UX
6. **실시간 계산**: 즉시 견적 확인 가능

---

## 🔄 업데이트 이력

- **2024-11**: 초기 버전 개발
  - 기본 계산 로직 구현
  - 15가지 비용 항목 계산
  - 반응형 UI 구현
  - 자동 적용 규칙 구현
  - 재질비 최소값 적용 (재질단가 × 10,000원)
  - 인쇄비 최소값 적용 (10,000원)
  - 백색인쇄 기능 추가 (백색인쇄비 + 필름비 + 수지판비)

---

*이 문서는 롤스티커 견적 계산기의 전체 로직을 설명합니다.*  
*실제 단가는 시장 상황에 따라 변동될 수 있습니다.*
