{
  "name": "feature-planner",
  "description": "Creates phase-based feature plans with quality gates and incremental delivery structure. Use when planning features, organizing work, breaking down tasks, creating roadmaps, or structuring development strategy. Keywords: plan, planning, phases, breakdown, strategy, roadmap, organize, structure, outline.",
  "version": "1.0.0",
  "invocation": {
    "type": "slash-command",
    "command": "plan"
  },
  "prompt": "# Feature Planner - Generate Structured Phase-Based Plans\n\n## Purpose\nGenerate structured, phase-based plans where:\n- Each phase delivers complete, runnable functionality\n- Quality gates enforce validation before proceeding\n- User approves plan before any work begins\n- Progress tracked via markdown checkboxes\n- Each phase is 1-4 hours maximum\n\n## Planning Workflow\n\n### Step 1: Requirements Analysis\n1. Ask user what feature to plan\n2. Read relevant files to understand codebase architecture\n3. Identify dependencies and integration points\n4. Assess complexity and risks\n5. Determine appropriate scope (small/medium/large)\n\n### Step 2: Phase Breakdown with TDD Integration\nBreak feature into 3-7 phases where each phase:\n- **Test-First**: Write tests BEFORE implementation\n- Delivers working, testable functionality\n- Takes 1-4 hours maximum\n- Follows Red-Green-Refactor cycle\n- Has measurable test coverage requirements\n- Can be rolled back independently\n- Has clear success criteria\n\n**Phase Structure**:\n- Phase Name: Clear deliverable\n- Goal: What working functionality this produces\n- **Test Strategy**: What test types, coverage target, test scenarios\n- Tasks (ordered by TDD workflow):\n  1. **RED Tasks**: Write failing tests first\n  2. **GREEN Tasks**: Implement minimal code to make tests pass\n  3. **REFACTOR Tasks**: Improve code quality while tests stay green\n- Quality Gate: TDD compliance + validation criteria\n- Dependencies: What must exist before starting\n- **Coverage Target**: Specific percentage or checklist for this phase\n\n### Step 3: Plan Document Creation\nCreate: `docs/plans/PLAN_<feature-name>.md`\n\nInclude:\n- Overview and objectives\n- Architecture decisions with rationale\n- Complete phase breakdown with checkboxes\n- Quality gate checklists\n- Risk assessment table\n- Rollback strategy per phase\n- Progress tracking section\n- Notes & learnings area\n\n### Step 4: User Approval (CRITICAL)\nUse AskUserQuestion to get explicit approval before proceeding.\n\nAsk:\n- \"Does this phase breakdown make sense for your project?\"\n- \"Any concerns about the proposed approach?\"\n- \"Should I proceed with creating the plan document?\"\n\nOnly create plan document after user confirms approval.\n\n### Step 5: Document Generation\n1. Create `docs/plans/` directory if not exists\n2. Use plan template from cc-feature-implementer-main/plan-template.md\n3. Generate plan document with all checkboxes unchecked\n4. Add clear instructions in header about quality gates\n5. Inform user of plan location and next steps\n\n## Quality Gate Standards\n\nEach phase MUST validate these items before proceeding:\n\n**Build & Compilation**:\n- [ ] Project builds/compiles without errors\n- [ ] No syntax errors\n\n**Test-Driven Development (TDD)**:\n- [ ] Tests written BEFORE production code\n- [ ] Red-Green-Refactor cycle followed\n- [ ] Unit tests: ≥80% coverage for business logic\n- [ ] Integration tests: Critical user flows validated\n- [ ] Test suite runs in acceptable time (<5 minutes)\n\n**Testing**:\n- [ ] All existing tests pass\n- [ ] New tests added for new functionality\n- [ ] Test coverage maintained or improved\n\n**Code Quality**:\n- [ ] Linting passes with no errors\n- [ ] Type checking passes (if applicable)\n- [ ] Code formatting consistent\n\n**Functionality**:\n- [ ] Manual testing confirms feature works\n- [ ] No regressions in existing functionality\n- [ ] Edge cases tested\n\n**Security & Performance**:\n- [ ] No new security vulnerabilities\n- [ ] No performance degradation\n- [ ] Resource usage acceptable\n\n**Documentation**:\n- [ ] Code comments updated\n- [ ] Documentation reflects changes\n\n## Phase Sizing Guidelines\n\n**Small Scope** (2-3 phases, 3-6 hours total):\n- Single component or simple feature\n- Minimal dependencies\n- Clear requirements\n- Example: Add dark mode toggle, create new form component\n\n**Medium Scope** (4-5 phases, 8-15 hours total):\n- Multiple components or moderate feature\n- Some integration complexity\n- Database changes or API work\n- Example: User authentication system, search functionality\n\n**Large Scope** (6-7 phases, 15-25 hours total):\n- Complex feature spanning multiple areas\n- Significant architectural impact\n- Multiple integrations\n- Example: AI-powered search with embeddings, real-time collaboration\n\n## Test Specification Guidelines\n\n### Test-First Development Workflow\n\n**For Each Feature Component**:\n1. **Specify Test Cases** (before writing ANY code)\n   - What inputs will be tested?\n   - What outputs are expected?\n   - What edge cases must be handled?\n   - What error conditions should be tested?\n\n2. **Write Tests** (Red Phase)\n   - Write tests that WILL fail\n   - Verify tests fail for the right reason\n   - Run tests to confirm failure\n\n3. **Implement Code** (Green Phase)\n   - Write minimal code to make tests pass\n   - Run tests frequently (every 2-5 minutes)\n   - Stop when all tests pass\n\n4. **Refactor** (Blue Phase)\n   - Improve code quality while tests remain green\n   - Extract duplicated logic\n   - Run tests after each refactoring step\n\n### Test Coverage by Language\n\nPHP (this project):\n```bash\nphpunit --coverage-html coverage\nopen coverage/index.html\n```\n\nJavaScript:\n```bash\njest --coverage\n```\n\n### Test Documentation in Plan\n\n**In each phase, specify**:\n1. **Test File Location**: Exact path where tests will be written\n2. **Test Scenarios**: List of specific test cases\n3. **Expected Failures**: What error should tests show initially?\n4. **Coverage Target**: Percentage for this phase\n5. **Dependencies to Mock**: What needs mocking/stubbing?\n6. **Test Data**: What fixtures/factories are needed?\n\n## Usage Examples\n\n**New Feature**:\n\"전단지 페이지에 할인 쿠폰 기능 추가 계획해줘\"\n\n**Refactoring**:\n\"모든 제품 페이지를 통합 갤러리 시스템으로 마이그레이션 계획 수립해줘\"\n\n**Integration**:\n\"LOGEN 택배 API 통합 개발 계획 만들어줘\"\n\nTemplate location: .claude/skills/cc-feature-implementer-main/plan-template.md"
}
