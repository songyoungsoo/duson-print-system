# Changelog - 2026년 1월

## 2026-01-12: 규격/수량 표시 통합 및 컬럼 너비 조정

### 변경 사항

#### 1. 소수점 수량 표시 수정
- **문제**: 프로덕션에서 "10.00권", "1000.00부" 등 소수점 표시
- **원인**: 레거시 Type_1 텍스트에 소수점 포함된 상태로 저장
- **해결**: `SpecDisplayService::parseLegacyType1()`에서 자동 정리
  - `10.00권` → `10권`
  - `1000.00부` → `1,000부`

#### 2. 레거시 필드 파싱 추가
- **파일**: `/includes/SpecDisplayService.php`
- **추가된 필드 파싱**:
  - `구분` → `spec_type`
  - `규격` → `spec_size`
  - `색상` → `spec_sides`
  - `종이종류` → `spec_material`
  - `주문방법` → `spec_design`

#### 3. 견적서 시스템 파일 동기화
- **문제**: 견적서용 ProductSpecFormatter가 구버전 (611줄 vs 1183줄)
- **해결**: `/mlangprintauto/quote/includes/ProductSpecFormatter.php` 최신화

#### 4. 테이블 컬럼 너비 조정 (OrderFormOrderTree.php)
- **변경 전**: 규격/옵션 35%, 공급가액 22%
- **변경 후**: 규격/옵션 44%, 공급가액 13%
- **적용 위치**:
  - 관리자 주문 상세 테이블
  - 영수증 출력
  - 거래명세표 출력

#### 5. 부가세포함 금액 폰트 크기 조정
- **변경 전**: 12pt
- **변경 후**: 9pt (한 줄 표시를 위해)

#### 6. 양식지(NCR) 단위 분석 완료
- **분석 결과**: 양식지는 항상 '권' 단위만 사용
- **이유**: 제본 형태 (100매철, 50매철) 판매
- **DB 문제**: `unit` 컬럼에 '매' 기본값 잘못 저장됨
- **해결**: `SpecDisplayService::getUnit()`이 PRODUCT_UNITS 우선 적용

### 수정된 파일
```
/includes/SpecDisplayService.php
/includes/ProductSpecFormatter.php
/mlangprintauto/quote/includes/ProductSpecFormatter.php
/mlangorder_printauto/OrderFormOrderTree.php
```

### 프로덕션 배포
- 모든 수정 파일 FTP 배포 완료

---

## 2026-01-11: Playwright E2E 테스트

### 변경 사항
- Playwright E2E 테스트 전체 통과 (44 passed, 6 skipped)
- quotation_temp 7일 이상 데이터 자동 정리 기능 추가

---

## 2026-01-08: 견적서 템플릿

### 변경 사항
- 견적서 A4 용지 스타일 및 colspan 수정
- 견적서 표준 템플릿 및 이메일 발송 기능 추가
